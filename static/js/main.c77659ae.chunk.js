(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){e.exports=a(361)},190:function(e,t,a){},234:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},321:function(e,t,a){},339:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),l=a(8),s=a(368),u=(a(190),a(191),a(192),a(2)),o=a(77),d=a(78),m=a(88),f=a(79),p=a(89),E=a(50),h=a(367),g=a(370),v=a(366),b=a(371),k=a(15),O=a.n(k),y=a(63),N=a(7),_=a(35),j=a(40),S=a(80),T="FETCH_TRIPS",x="FETCH_TRIP",F="SET_TRIPS",w="CREATE_TRIP",D="UPDATE_TRIP",C="DELETE_TRIP",A="REMOVE_TRIP",R="FETCH_CITIES",U="SET_CITIES",L="FETCH_FRIENDS",I="CREATE_FRIEND_REQ",M="ACCEPT_FRIEND_REQ",Y="FETCH_USER",P="SET_USERS",q="LOGOUT",G="API",B="FETCH_EXPLORE_SUGGESTIONS",z="SET_EXPLORE_SUGGESTIONS",H="REDIRECT_TO",V=a(10),W=a.n(V),J="https://api.locationless.club";function X(e){return{type:H,payload:{url:e}}}function Q(e){return{type:z,payload:e}}function $(e){return ce({url:"".concat(J,"/u/").concat(e.id,"/friends/"),method:"PUT",onSuccess:function(){return Z({data:Object(u.a)({},e,{is_friend:!0,is_pending_friend:!1})})},nextAction:ae,onFailure:function(){return console.log("Error occured accepting friendship request")},data:e,label:M})}function K(e){return ce({url:"".concat(J,"/u/").concat(e.id,"/friends/"),method:"POST",onSuccess:function(){return Z({data:Object(u.a)({},e,{have_requested_friend:!0})})},onFailure:function(){return console.log("Error occured requesting friendship")},data:e,label:I})}function Z(e){return{type:P,payload:e}}function ee(){return ce({url:"".concat(J,"/cities/"),onSuccess:te,onFailure:function(){return console.log("Error occured loading cities")},label:R})}function te(e){return{type:U,payload:e}}function ae(e){var t=e&&e.end_date_after?"end_date_after=".concat(W()(e.end_date_after,"YYYY-MM-DD")):"";return ce({url:"".concat(J,"/u/").concat(e.id,"/trips/?").concat(t),onSuccess:ne,onFailure:function(){return console.log("Error occured loading trips")},label:T})}function ne(e){return{type:F,payload:e}}function re(e){var t=e.redirectOnSuccess,a=Object(j.a)(e,["redirectOnSuccess"]);return ce({url:"".concat(J,"/trips/").concat(a.id),method:"PUT",redirectOnSuccess:t,onSuccess:ne,onFailure:function(){return console.log("Error occured updating trip")},data:a,label:D})}function ce(e){var t=e.url,a=void 0===t?"":t,n=e.method,r=void 0===n?"GET":n,c=e.data,i=void 0===c?null:c,l=e.accessToken,s=void 0===l?null:l,u=e.redirectOnSuccess,o=void 0===u?null:u,d=e.onSuccess,m=void 0===d?function(){}:d,f=e.onFailure,p=void 0===f?function(){}:f,E=e.nextAction,h=void 0===E?function(){}:E,g=e.label,v=void 0===g?"":g,b=e.headersOverride;return{type:G,payload:{url:a,method:r,data:i,accessToken:s,redirectOnSuccess:o,onSuccess:m,onFailure:p,label:v,headersOverride:void 0===b?null:b,nextAction:h}}}var ie=a(364),le=function(e){var t=e.name,a=e.background;return a=a||"e24c4c","https://ui-avatars.com/api/?name=".concat(t,"&background=").concat(a)},se=(a(234),function(e){var t=e.id,a=e.first_name,n=e.last_name,c=e.username,i=e.photo_url,l=e.photoOnly,s="".concat(a," ").concat(n||""),u=i||le({name:s}),o=c||s;return l?r.a.createElement("div",{className:"uk-border-circle friend-chip"},r.a.createElement("img",{className:"uk-border-circle avatar-preview",alt:"avatar",src:u})):r.a.createElement(ie.a,{className:"uk-border-circle friend-chip",to:"/users/".concat(t)},r.a.createElement("img",{className:"uk-border-circle avatar-preview",alt:"avatar",src:u}),r.a.createElement("div",{className:"uk-badge tooltip"},o))}),ue=a(114),oe=a.n(ue),de=a(37),me=a.n(de),fe=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],pe={margin:"auto",width:"fit-content"},Ee=function(e){var t=e.start_date,a=e.end_date,c=e.hideDaysCount,i=e.className,l=e.style;return r.a.createElement("div",{"data-toggle":!0,className:"uk-flex date-range ".concat(i||""),style:l||pe},r.a.createElement("div",null,r.a.createElement("b",null,W()(t,"DD")," ",r.a.createElement("br",null)," ",fe[oe()(t)])),r.a.createElement("div",null,r.a.createElement("b",null,a&&r.a.createElement(n.Fragment,null,W()(a,"DD"),r.a.createElement("br",null),fe[oe()(a)]))),!c&&r.a.createElement("h6",{style:{width:92,height:42,textAlign:"center",color:"#666",margin:2,marginTop:10}},a?me()(a,t):"?"," Day Trip"))},he=a(169),ge=a.n(he),ve=(a(236),function(e){var t=e.matches,a=e.start_date,c=e.end_date;return 0===t.length?r.a.createElement("p",null,"None of your friends trips are currently overlapping with this one. Maybe you need to add some people you know to improve your chances?"):r.a.createElement(n.Fragment,null,t.map(function(e){return r.a.createElement(be,Object.assign({key:e.id},e,{from:a,to:c}))}))}),be=function(e){var t=e.id,a=e.first_name,n=e.last_name,c=e.username,i=e.photo_url,l=e.start_date,s=e.end_date,u=e.from,o=e.to;return r.a.createElement("div",{className:"uk-flex uk-flex-middle friend-container"},r.a.createElement(se,{id:t,username:c,first_name:a,last_name:n,photo_url:i}),r.a.createElement(ke,{start_date:l,end_date:s,to:o,from:u}))},ke=function(e){e.id;var t=e.start_date,a=e.end_date,n=e.from,c=e.to,i=me()(c,n),l=me()(t,n),s=ge()(n,c,t,a),u={width:"".concat(Math.floor(100*s/i),"%"),marginLeft:"".concat(Math.max(Math.floor(100*l/i)-5,0),"%")};return r.a.createElement("div",{className:"overlap-bar-container"},r.a.createElement("div",{className:"overlap-bar",style:u},r.a.createElement(Ee,{style:{},className:"uk-flex uk-flex-between",start_date:t,end_date:a,hideDaysCount:!0})))},Oe=function(e){e.city;var t=e.start_date,a=e.end_date,c=e.matches,i=(e.isActive,e.user);return r.a.createElement(n.Fragment,null,r.a.createElement(be,Object.assign({},i,{start_date:t,end_date:a,to:a,from:t})),r.a.createElement("h5",null,"OVERLAPPING FRIENDS"),r.a.createElement(ve,{matches:c,start_date:t,end_date:a}))},ye=(a(237),function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null)))}),Ne=function(e){var t=e.isFetching,a=e.user,c=e.trip,i=e.onEditTrip,l=e.onDeleteTrip;return t||!c?r.a.createElement(ye,null):r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"uk-flex uk-flex-middle uk-flex-center"},r.a.createElement(_.a,{code:c.city.country_code,svg:!0}),r.a.createElement("span",{style:{paddingLeft:6}},c.city.name.toUpperCase())),r.a.createElement("div",{className:"uk-flex trip-actions uk-flex-around"},r.a.createElement("button",{onClick:i,className:"uk-button uk-button-default"},r.a.createElement("span",{className:"icono-sliders icon-sm"})," EDIT"),r.a.createElement("button",{onClick:l,className:"uk-button uk-button-default"},r.a.createElement("span",{className:"icono-trash icon-sm"})," DELETE")),r.a.createElement("br",null),r.a.createElement("h5",null,"YOUR DETAILS"),r.a.createElement(Oe,Object.assign({},c,{user:a})))},_e=Object(b.a)(Object(l.b)(function(e){return{activeUser:e.activeUser,trips:e.trips,users:e.users,cities:e.cities.all}},{fetchTrip:function(e){return ce({url:"".concat(J,"/trips/").concat(e),onSuccess:ne,onFailure:function(){return console.log("Error occured loading trips")},label:x})},deleteTrip:function(e){var t=e.redirectOnSuccess,a=Object(j.a)(e,["redirectOnSuccess"]);return ce({url:"".concat(J,"/trips/").concat(a.id),method:"DELETE",redirectOnSuccess:t,onFailure:function(){return console.log("Error occured deleting trip")},onSuccess:function(){return function(e){return{type:A,payload:e}}(a)},label:C})}})(function(e){var t=e.activeUser,a=e.match,c=e.trips,i=e.cities,l=e.users,s=e.history,o=e.fetchTrip,d=e.deleteTrip,m=parseInt(a.params.id,10),f=c.all[m];if(f&&(f=Object(u.a)({},f,{city:i[f.city],matches:f.matches.map(function(e){var t=e.split("::"),a=Object(N.a)(t,3),n=a[0],r=a[1],c=a[2];return Object(u.a)({},l.all[n],{start_date:r,end_date:c})})})).user!==t)return r.a.createElement(h.a,{to:"/404"});Object(n.useEffect)(function(){c.isFetching||f||o(m)},[]);var p=l.all[t];return r.a.createElement(n.Fragment,null,r.a.createElement(Ne,{isFetching:c.isFetching,user:p,trip:f,onEditTrip:function(){return s.push("/trips/".concat(m,"/edit"))},onDeleteTrip:function(){window.confirm("Are you sure you want to delete this trip?")&&d({id:m,redirectOnSuccess:"/"})}}))})),je=a(36),Se=a.n(je),Te=a(171),xe=a.n(Te),Fe=a(90),we=a(172),De=a.n(we);a(310);var Ce=function(e){var t=e.disabledDates,a=e.onChange,n=e.value,c=e.hideDaysCount,i=e.disabled,l=e.className,s=e.rangeClassName;return i?r.a.createElement(Ee,{className:s,start_date:n[0],end_date:n[1],hideDaysCount:c}):r.a.createElement(De.a,{className:l,options:{mode:"range",disable:t||[],dateFormat:"Y-m-d",wrap:!0},value:n,onChange:a},r.a.createElement(Ee,{className:s,start_date:n[0],end_date:n[1],hideDaysCount:c}),r.a.createElement("input",{style:{opacity:0,margin:0,width:1,padding:0},type:"text",placeholder:"I'm invisible and only here to anchor calendar to","data-input":!0}))},Ae=a(62),Re=a.n(Ae),Ue=(a(173),a(27)),Le=a.n(Ue),Ie=a(84),Me=a.n(Ie);function Ye(e){return e.map(function(e){return{from:Le()(e.start_date,1),to:Me()(e.end_date,1)}})}var Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return W()(e,"YYYY-MM-DD")};var qe=function(e){var t=e.children;return r.a.createElement(xe.a,{style:{width:"100%",flexGrow:!0},width:e.width,height:300,rowHeight:35,rowCount:t.length||0,rowRenderer:function(e){var a=e.key,n=e.index,c=(e.isScrolling,e.isVisible,e.style);return r.a.createElement("div",{key:a,style:c},t[n])}})},Ge=function(e){return e.map(function(e){return{label:r.a.createElement("div",null,r.a.createElement(_.a,{code:e.country_code,svg:!0})," ",e.name),value:e.id,name:e.name}})},Be=function(e,t){return(e.data.name||"").toUpperCase().indexOf((t||"").toUpperCase())>-1};var ze=Object(l.b)(function(e){return{cities:e.cities}},{fetchCities:ee})(function(e){var t=e.cities,a=e.trips,c=e.onSubmit,i=e.fetchCities,l=e.initialDates,s=e.initialCity,o=Object(n.useState)(l||function(e,t){var a=e.reduce(function(e,a){return Se()(a.end_date,Pe())?Pe():Se()(Le()(e,t-1),a.start_date)?e:a.end_date},Pe());return[a,Pe(Le()(a,t))]}(a,4)),d=Object(N.a)(o,2),m=d[0],f=d[1],p=Object(n.useState)(s),E=Object(N.a)(p,2),h=E[0],g=E[1];Object(n.useEffect)(function(){t.isFetching||t.hasFetched||i()},[]);var v=Object.keys(t.all).map(function(e){return t.all[e]});v.sort(function(e,t){return t.population-e.population});var b=Ge(v),k=b.find(function(e){return e.value===h});return r.a.createElement("form",{className:"uk-form-horizontal new-trip-form"},r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label"},"CITY"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement(Fe.a,{styles:{container:function(){return{width:250}},menu:function(e){return Object(u.a)({},e,{zIndex:9999,top:null})}},filterOption:Be,components:{MenuList:function(e){return r.a.createElement(qe,Object.assign({},e,{width:window.innerWidth}))}},placeholder:"",className:"country-picker",isSearchAble:!0,isLoading:t.isFetching,value:k,onChange:function(e){return g(e.value)},options:b}))),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("label",{className:"uk-form-label"},"DATE"),r.a.createElement("div",{className:"uk-form-controls"},r.a.createElement(Ce,{className:"uk-width-1-3@m",rangeClassName:"uk-text-center margin-unset",disabledDates:Ye(a),value:m,onChange:f,hideDaysCount:!0}))),r.a.createElement("button",{className:"uk-button uk-button-default",onClick:function(e){e.preventDefault(),c({city:h,start_date:W()(m[0],"YYYY-MM-DD"),end_date:W()(m[1],"YYYY-MM-DD")})},disabled:null===h||void 0===h||2!==m.length},"SUBMIT"))}),He=Object(b.a)(Object(l.b)(function(e){return{trips:e.trips,activeUser:e.activeUser}},{fetchTrips:ae,createTrip:function(e){var t=e.redirectOnSuccess,a=Object(j.a)(e,["redirectOnSuccess"]);return ce({url:"".concat(J,"/trips/"),method:"POST",redirectOnSuccess:t,onSuccess:ne,onFailure:function(){return console.log("Error occured creating trip")},data:a,label:w})}})(function(e){var t=e.fetchTrips,a=e.createTrip,c=e.trips,i=e.activeUser;e.history;if(Object(n.useEffect)(function(){t({id:i})},[i]),c.isFetching)return r.a.createElement(ye,null);var l=c.ids.map(function(e){return c.all[e]}).filter(function(e){return e.user===i});return l.sort(function(e,t){return Se()(e.start_date,t.start_date)?-1:1}),r.a.createElement("div",null,r.a.createElement(ze,{trips:l,onSubmit:function(e){a(Object(u.a)({},e,{redirectOnSuccess:"/"}))}}))})),Ve=Object(b.a)(Object(l.b)(function(e){return{trips:e.trips,activeUser:e.activeUser}},{fetchTrips:ae,updateTrip:re})(function(e){var t=e.fetchTrips,a=e.updateTrip,c=e.trips,i=e.activeUser,l=(e.history,e.match),s=c.all[l.params.id];if(Object(n.useEffect)(function(){t({id:i})},[i]),c.isFetching||!c.hasFetched)return r.a.createElement(ye,null);if(!s)return r.a.createElement(h.a,{to:"/404"});var o=c.ids.map(function(e){return c.all[e]}).filter(function(e){return e.id!==parseInt(l.params.id,10)}).filter(function(e){return e.user===i});return r.a.createElement("div",null,r.a.createElement(ze,{trips:o,onSubmit:function(e){a(Object(u.a)({},e,{id:s.id,redirectOnSuccess:"/trips/".concat(s.id)}))},initialDates:[s.start_date,s.end_date],initialCity:s.city}))})),We=function(e){var t=e.user,a=e.onRequest,n=e.onAccept;return t&&t.is_you?null:t&&t.is_friend?r.a.createElement("button",{className:"uk-button uk-flex uk-button-default",disabled:!0},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check"})),r.a.createElement("div",null,"Friends")):t&&t.is_pending_friend?r.a.createElement("button",{onClick:n,className:"uk-button uk-flex uk-button-default"},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check"})),r.a.createElement("div",null,"Accept")):t&&t.have_requested_friend?r.a.createElement("button",{className:"uk-button uk-flex uk-button-default",disabled:!0},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-clock"})),r.a.createElement("div",null,"Waiting")):r.a.createElement("button",{className:"uk-button uk-flex uk-button-default",onClick:a},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-plus"})),r.a.createElement("div",null,"Request"))},Je=(a(318),function(e){var t=e.username;return t?r.a.createElement("a",{className:"uk-button uk-button-default telegram-link",href:"https://t.me/".concat(t),target:"_blank",rel:"no-opener"},r.a.createElement("img",{src:"/telegram.svg",alt:"telegram-icon"}),r.a.createElement("span",null,"Telegram")):null}),Xe=(a(319),function(e){var t="".concat(e.first_name||""," ").concat(e.last_name||"");if(e.variant&&"small"!==e.variant)throw new Error("Invalid variant prop: ".concat(e.variant));return r.a.createElement("div",{className:"friend-card uk-card uk-card-default uk-margin ".concat(e.variant)},r.a.createElement(function(e){var t=e.children,a=e.is_friend,n=e.id;return a?r.a.createElement(ie.a,{className:"uk-card-title uk-flex uk-flex-middle",to:"/users/".concat(n)},t):r.a.createElement("div",{className:"uk-card-title uk-flex uk-flex-middle"},t)},{is_friend:e.is_friend,id:e.id},r.a.createElement("div",{className:"uk-width-auto uk-first-column uk-padding"},r.a.createElement(se,e),r.a.createElement("span",{className:"uk-text-small uk-padding-left uk-margin-remove-bottom"},t.toUpperCase()))),r.a.createElement("div",{className:"uk-padding-small uk-button-group uk-flex uk-flex-wrap"},r.a.createElement(We,{user:e,onAccept:e.onAccept,onRequest:e.onRequest}),"small"!==e.variant&&r.a.createElement(Je,e)))});var Qe=Object(l.b)(function(e){return{users:e.users}},{})(function(e){var t=e.users,a=e.onRequestFriend,c=e.onAcceptFriend,i=(e.fetchFriends,Object(n.useState)([])),l=Object(N.a)(i,2),s=l[0],u=l[1],o=Object(n.useState)(""),d=Object(N.a)(o,2),m=d[0],f=d[1];return Object(n.useEffect)(function(){var e=O.a.CancelToken.source();return m?O.a.get("".concat(J,"/u/search/?q=").concat(m),{cancelToken:e.token,withCredentials:!0}).then(function(e){var t=e.data;return u(t.data)}).catch(function(e){e&&"unmount"===e.message||console.log(e)}):u([]),function(){return e.cancel("unmount")}},[m]),r.a.createElement("div",{className:"uk-padding-small"},r.a.createElement("input",{className:"uk-input",placeholder:"Search for Telegram Username / Full Name",value:m,onChange:function(e){return f(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("div",{className:"uk-padding uk-flex uk-flex-wrap"},s.map(function(e){var n=t.all[e.id]||e;return n.is_you?null:r.a.createElement(Xe,Object.assign({},n,{variant:"small",onAccept:function(){return c(e)},onRequest:function(){return a(e)}}))})))}),$e=function(e){var t=e.isFetching,a=e.users,c=e.activeUser,i=e.acceptFriendRequest,l=e.requestFriendship;if(t)return r.a.createElement(ye,null);var s=Object.keys(a.all).filter(function(e){return parseInt(e,10)!==c}).map(function(e){return a.all[e]}),u=s.filter(function(e){return e.is_friend}),o=u.length>0,d=s.filter(function(e){return e.is_pending_friend}),m=d.length>0;return r.a.createElement(n.Fragment,null,m&&r.a.createElement("h4",null,"PENDING REQUESTS"),r.a.createElement("div",{className:"uk-flex uk-flex-wrap"},d.map(function(e){return r.a.createElement(Xe,Object.assign({key:e.id},e,{onAccept:function(){return i(e)}}))})),o&&r.a.createElement("h4",null,"FRIENDS"),r.a.createElement("div",{className:"uk-flex uk-flex-wrap"},u.map(function(e){return r.a.createElement(Xe,Object.assign({key:e.id},e))})),r.a.createElement("h4",null,"FIND FRIENDS"),r.a.createElement(Qe,{users:a,onRequestFriend:l,onAcceptFriend:i}))},Ke=Object(l.b)(function(e){return{users:e.users,activeUser:e.activeUser}},{fetchFriends:function(){return ce({url:"".concat(J,"/u/friends/"),onSuccess:Z,onFailure:function(){return console.log("Error occured loading friends")},label:L})},requestFriendship:K,acceptFriendRequest:$})(function(e){var t=e.users,a=e.fetchFriends,c=e.requestFriendship,i=e.acceptFriendRequest,l=e.activeUser;return Object(n.useEffect)(function(){t.isFetching||a()},[]),r.a.createElement(n.Fragment,null,r.a.createElement($e,{isFetching:t.isFetching&&0===t.ids.length,users:t,activeUser:l,acceptFriendRequest:i,requestFriendship:c}))}),Ze=a(38),et=a.n(Ze),tt=a(177),at=a.n(tt),nt=a(115),rt=a.n(nt);var ct=function(e){var t=e.onChange,a=(e.value,e.disabled),n=e.className,c=new Date,i=[{label:"Next 3 Months",value:[c,et()(c,3)]},{label:"Next 6 Months",value:[c,et()(c,6)]},{label:"This Year",value:[at()(rt()(c),-1),rt()(c)]},{label:"Last 3 Months",value:[et()(c,-3),c]},{label:"Last 6 Months",value:[et()(c,-6),c]}];return r.a.createElement(Fe.a,{styles:{container:function(){return{width:200}},menu:function(e){return Object(u.a)({},e,{zIndex:9999})},menuPortal:function(e){return Object(u.a)({},e,{zIndex:9999})}},className:n,onChange:function(e){var a=i.find(function(t){return t.label===e}).value;t(a)},menuPosition:"fixed",value:null,disabled:a,isSearchable:!1,placeholder:"Preset",options:i.map(function(e){return e.label}),getOptionLabel:function(e){return e}})},it=a(373),lt=a(372),st=a(369),ut=a(365),ot=a(374),dt=a(11),mt=Object(dt.divIcon)({html:'<span class="icono-caretDown"/>',iconSize:[25,25],iconAnchor:[17,24],popupAnchor:[-3,-26]}),ft=function(e){var t=e.city;return[t.latitude,t.longitude]},pt=function(e){return[[Math.min.apply(null,e.map(function(e){return e[0]}))-2,Math.min.apply(null,e.map(function(e){return e[1]}))-2],[Math.max.apply(null,e.map(function(e){return e[0]}))+2,Math.max.apply(null,e.map(function(e){return e[1]}))+2]]},Et=function(e){var t=e.onSelect,a=e.locations;if(t=t||function(){return{}},0===a.length)return r.a.createElement(it.a,{zoom:1.5,center:[30,40],style:{height:600}},r.a.createElement(lt.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>'}));var n=a.map(ft);return r.a.createElement(it.a,{bounds:pt(n),style:{height:600}},r.a.createElement(lt.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>'}),r.a.createElement(st.a,{positions:a.map(ft),color:"#bf4e4e"}),a.map(function(e){var a=e.id,n=e.city;return e.start_date,e.end_date,r.a.createElement(ut.a,{key:a,position:[n.latitude,n.longitude],icon:mt},r.a.createElement(ot.a,{onOpen:function(){return t(a)},onClose:function(){return t(null)},className:"uk-hidden"}))}))};var ht=function(e){var t=e.allFriends,a=e.numDisplayed;return 0===t.length?r.a.createElement("div",{className:"uk-border-circle avatar-preview uk-background-muted"},r.a.createElement("p",{className:"uk-border-circle uk-dark"},"-")):t.length>a?r.a.createElement("div",{className:"uk-border-circle avatar-preview uk-background-muted"},r.a.createElement("p",{className:"uk-border-circle uk-dark"},"+",t.length-a)):null},gt=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("div",null,r.a.createElement("h6",null,"No Trip Selected")),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"}))),r.a.createElement("hr",null))},vt=Object(l.b)(function(){return{}},{updateTrip:re})(Object(b.a)(function(e){var t=e.updateTrip,a=e.disabledDates,c=e.viewOnly,i=(e.isHighlighted,Object(j.a)(e,["updateTrip","disabledDates","viewOnly","isHighlighted"])),l=i.id,s=i.city,u=i.start_date,o=i.end_date,d=i.matches,m=Object(n.useState)([u,o]),f=Object(N.a)(m,2),p=f[0],E=f[1];if(!l)return r.a.createElement(gt,null);var h=(a||[]).filter(function(e){var t=e.from,a=e.to;return!(W()(Le()(u,1),"YYYY-MM-DD")===W()(t,"YYYY-MM-DD")&&W()(Me()(o,1),"YYYY-MM-DD")===W()(a,"YYYY-MM-DD"))}),g=c?"div":ie.a;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("div",null,r.a.createElement(g,{to:"/trips/".concat(l)},r.a.createElement("h6",{className:"trip-title"},r.a.createElement(_.a,{code:s.country_code,svg:!0})," | ",s.name)),r.a.createElement(Ce,{disabledDates:h,value:p,onChange:function(e){if(E(e),2===e.length)return t({id:l,city:s.id,start_date:W()(e[0],"YYYY-MM-DD"),end_date:W()(e[1],"YYYY-MM-DD")})},disabled:!0})),r.a.createElement("div",{className:"uk-flex"},r.a.createElement("span",{className:"uk-flex"},d.slice(0,3).map(function(e){return r.a.createElement(se,Object.assign({key:e.id},e))}),r.a.createElement(ht,{allFriends:d,numDisplayed:3})))))})),bt=(a(321),function(e){var t=e.onClick;return r.a.createElement("button",{className:"active-panel-switch-btn uk-button uk-button-secondary",onClick:t},"Go To List View")}),kt=function(e){var t=e.onClick;return r.a.createElement("button",{className:"active-panel-switch-btn uk-button uk-button-secondary",onClick:t},"Go To Map View")},Ot=function(e){var t=e.setSelectedDates,a=e.dateSelection;return r.a.createElement("div",{className:"date-filters uk-padding-small uk-flex uk-flex-around uk-flex-middle"},r.a.createElement(ct,{value:null,onChange:t}),r.a.createElement(Ce,{className:"uk-width-1-3@m uk-flex uk-flex-middle uk-flex-center",value:a,onChange:t,hideDaysCount:!0}))},yt=function(e){return function(t){var a=t.start_date,n=t.end_date,r=Object(N.a)(e,2),c=r[0],i=r[1];return Re()(a,c,i)||Re()(n,c,i)}},Nt=function(e){var t=e.user,a=e.activeUser,c=e.locations,i=e.isFetching,l=Object(n.useState)([Pe(),Pe(et()(Pe(),3))]),s=Object(N.a)(l,2),u=s[0],o=s[1],d=Object(n.useState)("LIST"),m=Object(N.a)(d,2),f=m[0],p=m[1];if(!c||i)return r.a.createElement(ye,null);if(0===c.length)return r.a.createElement("div",null,"No trips yet...",r.a.createElement("br",null));var E=c.filter(yt(u)),h=Ye(c),g=["trip-list-container","uk-margin uk-flex uk-flex-between",f];return r.a.createElement("div",{className:g.join(" ")},r.a.createElement("div",{className:"left-panel"},r.a.createElement(bt,{onClick:function(){return p("LIST")}}),r.a.createElement(Ot,{setSelectedDates:o,dateSelection:u}),r.a.createElement(Et,{locations:E})),r.a.createElement("div",{className:"right-panel"},r.a.createElement(kt,{onClick:function(){return p("MAP")}}),r.a.createElement(Ot,{setSelectedDates:o,dateSelection:u}),r.a.createElement("div",{className:"trip-list"},E.map(function(e){return r.a.createElement(vt,Object.assign({key:e.id,disabledDates:h},e,{viewOnly:t.id!==a}))}))))},_t=Object(l.b)(function(e){var t=e.cities,a=e.trips;return{users:e.users,trips:a,cities:t,activeUser:e.activeUser}},{fetchUser:function(e){return ce({url:"".concat(J,"/u/").concat(e,"/"),onSuccess:Z,onFailure:function(){return console.log("Error occured loading user",e)},label:Y})},fetchTrips:ae,requestFriendship:K,acceptFriendRequest:$})(function(e){var t=e.match,a=e.users,c=e.fetchUser,i=e.fetchTrips,l=e.trips,s=e.cities,o=e.activeUser,d=e.requestFriendship,m=e.acceptFriendRequest,f=parseInt(t.params.id,10),p=a.all[f];if(Object(n.useEffect)(function(){a.isFetching||f===o||c(f),i({id:f})},[f]),a.isFetching||!p)return r.a.createElement(ye,null);var E=l.ids.map(function(e){var t=l.all[e];return Object(u.a)({},t,{city:s.all[t.city],matches:t.matches.map(function(e){var t=e.split("::"),n=Object(N.a)(t,3),r=n[0],c=n[1],i=n[2];return Object(u.a)({},a.all[r],{start_date:c,end_date:i})})})}).filter(function(e){return e.user===f});E.sort(function(e,t){return Se()(e.start_date,t.start_date)?-1:1});var h="".concat(p.first_name," ").concat(p.last_name);return r.a.createElement("div",null,r.a.createElement("div",{className:"centered-hero"},r.a.createElement("div",{className:"uk-flex uk-flex-left profile-details"},r.a.createElement("div",{className:"uk-flex uk-flex-left"},r.a.createElement("img",{className:"avatar-big uk-border-circle",alt:"avatar",src:p.photo_url||le({name:h})}),r.a.createElement("div",{className:"uk-flex uk-flex-column uk-padding"},p.username&&r.a.createElement("h4",null,"@",p.username),r.a.createElement("span",null,p.first_name.toUpperCase()," ",(p.last_name||"").toUpperCase()))),r.a.createElement("div",{className:"user-icons"},r.a.createElement(We,{user:p,onRequest:function(){return d(p)},onAccept:function(){return m(p)}})),!p.is_you&&r.a.createElement("div",{className:"user-icons"},r.a.createElement(Je,{username:p.username}))),p.id===o&&r.a.createElement(ie.a,{to:"/trips/new",className:"uk-button uk-button-default"},r.a.createElement("span",{className:"icono-plus icon-sm"})," ADD NEW TRIP"),r.a.createElement("hr",null)),r.a.createElement(Nt,{user:p,locations:E,activeUser:o,isFetching:l.isFetching}))}),jt=[{label:"Europe",value:"EU"},{label:"N America",value:"NA"},{label:"S America",value:"SA"},{label:"Africa",value:"AF"},{label:"Asia",value:"AS"},{label:"Oceania",value:"OC"}],St=function(e){var t=e.suggestions;return 0===t.length?r.a.createElement("div",null,"No results... Try adjusting your filters or adding more"," ",r.a.createElement(ie.a,{to:"/friends"},"friends")):r.a.createElement("div",null,t.map(function(e){var t=e.city,a=e.users;return r.a.createElement("div",{key:t.id,className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("h6",null,r.a.createElement(_.a,{code:t.country_code,svg:!0})," | ",t.name),a.map(function(e){return r.a.createElement(se,Object.assign({key:e.id},e))}))}))},Tt=Object(l.b)(function(e){return{cities:e.cities,suggestions:e.suggestions,users:e.users,activeUser:e.activeUser}},{fetchCities:ee,fetchExploreSuggestions:function(e){return ce({url:"".concat(J,"/explore/?").concat(Object(S.stringify)(e)),onSuccess:Q,onFailure:function(){return console.log("Error occured loading explore suggestions")},label:B})}})(function(e){var t=e.cities,a=e.suggestions,c=e.users,i=e.fetchCities,l=(e.activeUser,e.fetchExploreSuggestions),s=Object(n.useState)(null),u=Object(N.a)(s,2),o=u[0],d=u[1],m=Object(n.useState)([new Date,Le()(new Date,60)]),f=Object(N.a)(m,2),p=f[0],E=f[1];Object(n.useEffect)(function(){t.isFetching||0!==t.ids.length||i()},[]);if(Object(n.useEffect)(function(){l({continent:o||void 0,start_date:p[0]&&W()(p[0],"YYYY-MM-DD"),end_date:p[1]&&W()(p[1],"YYYY-MM-DD")})},[o,p[0],p[1]]),a.isFetching)return r.a.createElement(ye,null);var h=a.ids.map(function(e){var n=a.all[e],r=n.users.map(function(e){return c.all[e]});return{city:t.all[n.city],users:r}});return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-flex uk-flex-around"},r.a.createElement(Ce,{value:p,onChange:E,hideDaysCount:!0,className:"uk-flex-none"}),r.a.createElement("div",{className:"uk-flex uk-flex-wrap uk-flex-wrap-top uk-flex-center"},jt.map(function(e){return r.a.createElement("button",{key:e.value,style:{width:100,height:40,fontSize:12,padding:0,margin:2,lineHeight:"12px",fontWeight:"bold"},className:"uk-button uk-button-default ".concat(o===e.value&&"uk-button-secondary"),onClick:function(){return function(e){d(e===o?null:e)}(e.value)}},e.label)}))),r.a.createElement("hr",null),r.a.createElement(St,{suggestions:h}))}),xt=function(e){var t=e.username,a=e.profilePic;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-flex uk-flex-center"},r.a.createElement("img",{className:"avatar-big uk-border-circle",alt:"avatar",src:a})),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement(ie.a,{to:"/login"},"Sign in")," to explore the world with"," ",r.a.createElement("b",null,t)))},Ft=Object(l.b)(function(){return{}},{redirectToLater:X})(Object(b.a)(function(e){var t=e.match,a=e.redirectToLater,c=t.params.username,i=Object(n.useState)(null),l=Object(N.a)(i,2),s=l[0],u=l[1],o=Object(n.useState)(null),d=Object(N.a)(o,2),m=d[0],f=d[1],p=Object(n.useState)(null),E=Object(N.a)(p,2),g=E[0],v=E[1];if(Object(n.useEffect)(function(){O.a.get("".concat(J,"/u/").concat(c,"/preview"),{withCredentials:!0}).then(function(e){var t=e.data;u(t.data.id),f(t.data.photo_url||le({name:c})),a("/users/".concat(t.data.id))}).catch(function(e){e.response&&404===e.response.status&&(u("NOT FOUND"),f(null)),u("NOT FOUND")})},[s]),Object(n.useEffect)(function(){O.a.get("".concat(J,"/u/"),{withCredentials:!0}).then(function(e){var t=e.data;return v(t.data.id)}).catch(function(){return null})},[1]),s&&g)return r.a.createElement(h.a,{to:"/users/".concat(s)});var b=r.a.createElement(ye,null);"NOT FOUND"===s?b=r.a.createElement("p",null,"Oops! Looks like ",r.a.createElement("b",null,c)," doesn't have a public profile yet."):s&&(b=r.a.createElement(xt,{username:c,profilePic:m}));return r.a.createElement("section",{className:"uk-flex uk-flex-center"},r.a.createElement("div",{className:"uk-panel uk-panel-box uk-text-center"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:55,paddingRight:15,paddingLeft:15,marginBottom:40}}),b))})),wt=Object(E.a)(function(e){var t=e.component,a=Object(j.a)(e,["component"]);return r.a.createElement(v.a,Object.assign({},a,{render:function(e){return a.cookies.get("sessionid")?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login"}})}}))}),Dt=a(179),Ct=a.n(Dt),At=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={errMsg:null},a.handleResponse=function(e){return O()({url:"".concat(J,"/u/auth/?").concat(Object(S.stringify)(e)),method:"get",withCredentials:!0}).then(function(t){a.props.onLogin(e)}).catch(function(e){if(e.response){var t=e.response.data&&e.response.data.errors&&e.response.data.errors[0]||e.response;a.setState({errMsg:t})}else a.setState({errMsg:"Unable to connect to the API"})})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"uk-flex uk-flex-center"},r.a.createElement("div",{className:"uk-panel uk-panel-box uk-text-center telegram-login-container"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:55,paddingRight:15,paddingLeft:15}}),r.a.createElement("h1",null,"LOCATIONLESS"),r.a.createElement("hr",null),r.a.createElement(Ct.a,{dataOnauth:this.handleResponse,botName:"LocationlessBot"}),r.a.createElement("p",null,"You will need an account on"," ",r.a.createElement("a",{target:"_blank",href:"https://telegram.org",rel:"no-opener"},"Telegram")," ","to get started")))}}]),t}(n.Component),Rt=Object(b.a)(At),Ut=function(e){var t=e.activeUser,a=e.onLogout,c=e.history,i=Object(n.useState)(!1),l=Object(N.a)(i,2),s=l[0],u=l[1],o=function(e){u(!1),c.push(e)};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-navbar-item uk-hidden@s",onClick:function(){return u(!s)}},r.a.createElement("div",{className:"icono-hamburger",onClick:function(){return u(!s)}})),s&&r.a.createElement("div",{className:"fullscreen-mobile-menu"},r.a.createElement("ul",{className:"uk-list"},r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return u(!s)}},r.a.createElement("div",{className:"icono-cross"})),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return o("/explore")}},r.a.createElement("h4",null,"EXPLORE")),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return o("/friends")}},r.a.createElement("h4",null,"FRIENDS")),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return o("/users/".concat(t))}},r.a.createElement("h4",null,"PROFILE")),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return u(!1),void a()}},r.a.createElement("h4",null,"LOGOUT")))))},Lt=function(e){var t=e.activeUser,a=e.onLogout;return r.a.createElement("div",{className:"uk-navbar-right uk-visible@s"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(ie.a,{to:"/explore"},"Explore")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(ie.a,{to:"/friends"},"Friends")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(ie.a,{to:"/users/".concat(t)},"Profile")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement("a",{onClick:a},"Logout"))))},It=Object(b.a)(Object(E.a)(function(e){var t=e.cookies,a=e.onLogout,n=e.activeUser,c=e.history;return n&&t.get("sessionid")?r.a.createElement("div",{className:"uk-navbar-container"},r.a.createElement("nav",{className:"navbar-main uk-navbar uk-container"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement(Ut,{activeUser:n,onLogout:a,history:c}),r.a.createElement(ie.a,{className:"uk-navbar-item uk-logo",to:"/"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:35,paddingRight:15,paddingLeft:15}}),"Locationless")),r.a.createElement(Lt,{activeUser:n,onLogout:a}))):null})),Mt="Something has gone wrong. We're going to try turning it off and on again.",Yt="Nothing to see here.";a(339);y.init({dsn:"https://6eb020f217d44ca183577d4e925cfe2d@sentry.io/1341418"});var Pt=function(e){return"/login"===e||0===e.indexOf("/u/")},qt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={errorMsg:null},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"onLogout",value:function(){this.props.cookies.remove("sessionid"),this.props.logout(),O.a.post("".concat(J,"/u/logout/"),{withCredentials:!0}),this.props.history.push("/login")}},{key:"onLogin",value:function(e){this.props.history.push("/"),this.props.setUsers({data:Object(u.a)({},e,{is_you:!0})})}},{key:"componentDidCatch",value:function(e,t){y.withScope(function(a){Object.keys(t).forEach(function(e){return a.setExtra(e,t[e])}),y.captureException(e)})}},{key:"componentDidMount",value:function(){this.checkLoginStatus()}},{key:"componentDidUpdate",value:function(){this.checkLoginStatus()}},{key:"checkLoginStatus",value:function(){var e=this,t=this.props,a=t.activeUser,n=t.redirectTo,r=t.location,c=t.history;window.gtag&&c.listen(function(e){window.gtag("set",{user:a}),window.gtag("event","page_view",{pathname:e.pathname})}),a||Pt(r.pathname)||O.a.get("".concat(J,"/u/"),{withCredentials:!0}).then(function(t){var a=t.data;return e.props.setUsers({data:a.data})}).catch(function(t){e.props.history.push("/login")}),n===r.pathname&&this.props.redirectToLater(null)}},{key:"renderAuthorTag",value:function(){return r.a.createElement("div",{className:"author"},r.a.createElement("a",{href:"https://jtfell.github.io",target:"_blank",rel:"noopener"},"by jtfell"))}},{key:"render",value:function(){var e=this,t=this.props,a=t.activeUser,c=t.redirectTo,i=t.location;return this.props.error.message||this.state.errorMsg?r.a.createElement(Gt,{msg:this.props.error.message||this.state.errorMsg}):a||Pt(i.pathname)?a&&c&&c!==i.pathname?r.a.createElement(h.a,{to:c}):r.a.createElement(n.Fragment,null,r.a.createElement(It,{onLogout:this.onLogout.bind(this),activeUser:a}),r.a.createElement("main",{className:"uk-container uk-container-small uk-container-center uk-padding"},r.a.createElement(g.a,null,r.a.createElement(v.a,{path:"/login",component:function(){return r.a.createElement(Rt,{onLogin:e.onLogin.bind(e)})}}),r.a.createElement(v.a,{path:"/u/:username",component:Ft}),r.a.createElement(wt,{exact:!0,path:"/",component:function(){return r.a.createElement(h.a,{to:"/users/".concat(e.props.activeUser)})}}),r.a.createElement(wt,{path:"/trips/new",component:He}),r.a.createElement(wt,{path:"/trips/:id/edit",component:Ve}),r.a.createElement(wt,{path:"/trips/:id",component:_e}),r.a.createElement(wt,{exact:!0,path:"/friends",component:Ke}),r.a.createElement(wt,{exact:!0,path:"/explore",component:Tt}),r.a.createElement(wt,{path:"/users/:id",component:_t}),r.a.createElement(v.a,{component:function(){return r.a.createElement(Gt,{msg:Yt,hideLogo:!0})}}))),this.renderAuthorTag()):r.a.createElement(n.Fragment,null,r.a.createElement(ye,null),this.renderAuthorTag())}}],[{key:"getDerivedStateFromError",value:function(e){return{errorMsg:Mt}}}]),t}(n.Component),Gt=function(e){var t=e.msg,a=e.hideLogo;return r.a.createElement("main",{className:"uk-container uk-container-small uk-container-center uk-padding"},!a&&r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:85,padding:15}})),r.a.createElement("hr",null),r.a.createElement("h4",null,t),r.a.createElement("a",{onClick:function(){return y.showReportDialog()}},"Report feedback"))},Bt=Object(b.a)(Object(E.a)(Object(l.b)(function(e){return{users:e.users,activeUser:e.activeUser,error:e.error,redirectTo:e.redirectTo}},{setUsers:Z,logout:function(){return{type:q}},redirectToLater:X})(qt)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var zt=a(52),Ht=a(116);var Vt=a(46),Wt=new Vt.b.Entity("users"),Jt=new Vt.b.Entity("cities"),Xt=new Vt.b.Entity("matches",{user:Wt},{idAttribute:function(e){return"".concat(e.user.id,"::").concat(e.start_date,"::").concat(e.end_date)}}),Qt={users:Wt,cities:Jt,trips:new Vt.b.Entity("trips",{user:Wt,city:Jt,matches:[Xt]},{processStrategy:function(e,t,a){var n=e.matches||[];return Object(u.a)({},e,{matches:n})}}),suggestions:new Vt.b.Entity("suggestions",{city:Jt,users:[Wt]},{idAttribute:function(e){return e.city.id}})},$t={activeUser:null,redirectTo:null,error:{status:null,message:null},trips:{ids:[],all:{},isFetching:!1,hasFetched:!1},cities:{ids:[],all:{},isFetching:!1,hasFetched:!1},users:{ids:[],all:{},isFetching:!1,hasFetched:!1},suggestions:{ids:[],all:{},isFetching:!1,hasFetched:!1}},Kt=["trips","cities","users","suggestions"],Zt=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)||(t=[t]);var r=Object(Vt.a)(t,[Qt[a]]),c=Object(u.a)({},e);if(Object.keys(e).forEach(function(t){e[t]&&-1!==Kt.indexOf(t)&&(c[t]=Object(u.a)({},e[t]),Object(Ht.a)(new Set(Object.keys(e[t].all).concat(Object.keys(r.entities[t]||{})))).forEach(function(a){c[t].all[a]=Object.assign({},e[t].all[a],(r.entities[t]||{})[a])}))}),n)c[a].ids=r.result;else{var i=e[a].ids;c[a].ids=Object(Ht.a)(new Set(i.concat(r.result)))}return c},ea=[T],ta=[R],aa=[Y,L],na=a(180),ra=a(76),ca=function(e){return{type:"API_END",payload:e}},ia=function(e){var t=e.dispatch;return function(e){return function(a){if(a&&(e(a),a.type===G)){var n=a.payload,r=n.url,c=n.method,i=n.data,l=n.accessToken,s=n.redirectOnSuccess,u=n.onSuccess,o=n.onFailure,d=n.label,m=n.headers,f=n.nextAction,p=["GET","DELETE"].includes(c)?"params":"data";O.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_TELEGRAM_BOT:"LocationlessBot",REACT_APP_API_URL:"https://api.locationless.club",REACT_APP_GA_ENABLED:"true",REACT_APP_SENTRY_DSN:"https://6eb020f217d44ca183577d4e925cfe2d@sentry.io/1341418"}).REACT_APP_BASE_URL||"",O.a.defaults.headers.common["Content-Type"]="application/json",O.a.defaults.headers.common.Authorization="Bearer ".concat(l),d&&t(function(e){return{type:"API_START",payload:e}}(d)),O.a.request(Object(ra.a)({url:r,method:c,headers:m,withCredentials:!0},p,i)).then(function(e){var a=e.data;t(u(a)),s&&t(X(s)),t(f(a)),d&&t(ca(d))}).catch(function(e){t(function(e){return{type:"API_ERROR",error:e}}(e)),t(o(e)),e.response&&401===e.response.status&&t({type:"ACCESS_DENIED",payload:{url:window.location.pathname}}),d&&t(ca(d))})}}}},la=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||zt.c,sa=Object(zt.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return $t;case"API_ERROR":return function(e,t){var a=t.error&&t.error.response;return!a||a.status>=500||!a.status?Object(u.a)({},e,{error:{status:500,message:Mt}}):404===a.status?Object(u.a)({},e,{error:{status:404,message:Yt}}):Object(u.a)({},e,{error:{status:a.status,message:a.data&&a.data.error||Mt}})}(e,t);case H:return Object(u.a)({},e,{redirectTo:t.payload.url});case A:var a=Object.assign({},e.trips);return a.ids=a.ids.filter(function(e){return e!==t.payload.id}),delete a.all[t.payload.id],Object(u.a)({},e,{trips:a});case z:return Zt(e,t.payload.data,"suggestions",!0);case F:return Zt(e,t.payload.data,"trips");case U:return Zt(e,t.payload.data,"cities");case P:var n=Zt(e,t.payload.data,"users");return t.payload&&t.payload.data&&t.payload.data.is_you&&(n.activeUser=t.payload.data.id),n;case"API_START":return ea.indexOf(t.payload)>-1?Object(u.a)({},e,{trips:Object(u.a)({},e.trips,{isFetching:!0})}):aa.indexOf(t.payload)>-1?Object(u.a)({},e,{users:Object(u.a)({},e.users,{isFetching:!0})}):ta.indexOf(t.payload)>-1?Object(u.a)({},e,{cities:Object(u.a)({},e.cities,{isFetching:!0})}):e;case"API_END":return ea.indexOf(t.payload)>-1?Object(u.a)({},e,{trips:Object(u.a)({},e.trips,{isFetching:!1,hasFetched:!0})}):aa.indexOf(t.payload)>-1?Object(u.a)({},e,{users:Object(u.a)({},e.users,{isFetching:!1,hasFetched:!0})}):ta.indexOf(t.payload)>-1?Object(u.a)({},e,{cities:Object(u.a)({},e.cities,{isFetching:!1,hasFetched:!0})}):e;default:return e}},la(Object(zt.a)(ia,na.a)));window.store=sa;var ua=sa;i.a.render(r.a.createElement(l.a,{store:ua},r.a.createElement(s.a,null,r.a.createElement(Bt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[182,1,2]]]);
//# sourceMappingURL=main.c77659ae.chunk.js.map