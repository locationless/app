{"version":3,"sources":["actions/types.js","config.js","actions/index.js","helpers/dateUtils.js","components/NewTrip.react.js","components/FriendChip.react.js","components/DateRange.react.js","components/TripCard.react.js","components/Spinner.react.js","pages/TripDashboard.react.js","components/TripPanel.react.js","pages/TripDetail.react.js","components/FriendStatusButton.react.js","components/FriendSearch.react.js","pages/FriendsList.react.js","components/LocationMap.react.js","pages/UserProfile.react.js","components/PrivateRoute.react.js","components/Login.react.js","components/Header.react.js","errorMessages.js","App.js","serviceWorker.js","reducers/index.js","middleware/api.js","actions/api.js","store/index.js","reducers/util.js","index.js"],"names":["FETCH_TRIPS","FETCH_TRIP","SET_TRIPS","CREATE_TRIP","UPDATE_TRIP","DELETE_TRIP","REMOVE_TRIP","FETCH_CITIES","SET_CITIES","FETCH_FRIENDS","CREATE_FRIEND_REQ","ACCEPT_FRIEND_REQ","FETCH_USER","SET_USERS","LOGOUT","API","apiUrl","process","fetchFriends","apiAction","url","concat","onSuccess","setUsers","onFailure","console","log","label","acceptFriendRequest","data","id","method","Object","objectSpread","is_friend","is_pending_friend","nextAction","fetchTrips","requestFriendship","have_requested_friend","type","payload","setCities","setTrips","_ref","_ref$url","_ref$method","_ref$data","_ref$accessToken","accessToken","_ref$onSuccess","_ref$onFailure","_ref$nextAction","_ref$label","_ref$headersOverride","headersOverride","determineNextFreeDate","trips","n","nextFreeDate","reduce","lastChecked","nextTrip","isBefore","addDays","start_date","Date","end_date","now","MenuList","props","rows","children","react_default","a","createElement","dist_es","style","width","flexGrow","height","rowHeight","rowCount","length","rowRenderer","key","index","isScrolling","isVisible","convertToSelectOpts","i","map","index_es","code","country_code","svg","name","value","NewTrip","_ref2","cities","disabledDates","onCreateTrip","_useState","useState","_useState2","slicedToArray","dates","setDates","_useState3","_useState4","city","setCity","useEffect","t","join","citiesList","keys","all","cId","sort","b","population","className","react_select_esm","styles","container","menu","provided","top","components","_MenuList","assign","window","innerWidth","placeholder","isSearchAble","isLoading","isFetching","onChange","options","build_default","mode","disable","dateFormat","onClick","e","preventDefault","parseInt","split","format","disabled","FriendChip","first_name","last_name","username","photo_url","photoOnly","photoSrc","tooltipText","alt","src","Link","to","MONTHS","DateRange","getDate","getMonth","fontSize","textAlign","margin","marginTop","differenceInDays","ExtraFriends","_ref3","allFriends","numDisplayed","withRouter","onUpdate","onDelete","objectWithoutProperties","matches","editMode","setEditMode","promptDel","setPromptDel","_useState5","_useState6","disabledDatesMinusThoseForThisTrip","filter","from","subDays","react","DateRange_react","slice","m","FriendChip_react","TripCard_react_ExtraFriends","Spinner","TripsList","updateTrip","deleteTrip","Spinner_react","trip","TripCard_react","connect","users","fetchCities","createTrip","removeTrip","hasFetched","populatedTrips","ids","tId","match","_match$split","_match$split2","uId","start","end","determineAlreadySelectedTripDates","NewTrip_react","isLoadingCities","OverlappingFriends","TripPanel_react_OverlapGraph","OverlapGraph","TripPanel_react_OverlapBar","OverlapBar","_ref4","totalLength","daysFromStart","daysOverlap","getOverlappingDaysInRanges","Math","floor","max","TripPanel","isActive","TripPanel_react_OverlappingFriends","MainPanel","TripPanel_react","fetchTrip","tripId","params","TripDetail_react_MainPanel","FriendshipStatus","user","onRequest","onAccept","is_you","onRequestFriend","onAcceptFriend","results","setResults","phrase","setPhrase","source","axios","CancelToken","get","cancelToken","token","withCredentials","then","catch","err","message","cancel","target","r","friendObj","FriendStatusButton_react","activeUser","friendList","accepted","f","hasFriends","pending","hasPendingFriends","FriendSearch_react","FriendsList_react_MainPanel","locationIcon","divIcon","html","iconSize","iconAnchor","popupAnchor","LocationMap","userId","locations","setLocations","res","status","fLocations","Map","center","zoom","TileLayer","attribution","Polyline","positions","latitude","longitude","color","Marker","position","icon","Popup","toUpperCase","LocationMap_react","fetchUser","UserProfile_react_MainPanel","withCookies","Component","component","rest","Route","render","cookies","Redirect","pathname","Login","state","errMsg","handleResponse","stringify","_this","onLogin","response","errors","setState","paddingRight","paddingLeft","react_telegram_login_build_default","dataOnauth","this","botName","href","MobileNavbar","onLogout","history","isOpen","setIsOpen","navigateTo","push","DesktopNavbar","Header_react_MobileNavbar","Header_react_DesktopNavbar","SERVER_ERR","NOT_FOUND","App","remove","logout","post","_this$props","location","rel","_this2","error","App_ErrorPage","msg","Header_react","bind","Switch","path","Login_react","PrivateRoute_react","exact","TripDashboard","TripDetail","FriendsList","UserProfile","hideLogo","renderAuthorTag","ErrorPage","padding","Boolean","hostname","schema","Entity","idAttribute","v","schemas","processStrategy","parent","initialState","ENTITIES","insertEntities","entity","Array","isArray","normData","normalize","newState","forEach","indexOf","toConsumableArray","Set","entities","existingIds","result","TRIPS_LABELS","CITIES_LABELS","USERS_LABELS","apiMiddleware","dispatch","next","action","_action$payload","headers","dataOrParams","includes","defaults","baseURL","REACT_APP_BASE_URL","common","apiStart","request","defineProperty","apiError","finally","apiEnd","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","arguments","undefined","reduceError","applyMiddleware","thunkMiddleware","ReactDOM","es","BrowserRouter","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dd44228c.chunk.js","sourcesContent":["export const FETCH_TRIPS = 'FETCH_TRIPS';\nexport const FETCH_TRIP = 'FETCH_TRIP';\nexport const SET_TRIPS = 'SET_TRIPS';\nexport const CREATE_TRIP = 'CREATE_TRIP';\nexport const UPDATE_TRIP = 'UPDATE_TRIP';\nexport const DELETE_TRIP = 'DELETE_TRIP';\nexport const REMOVE_TRIP = 'REMOVE_TRIP';\n\nexport const FETCH_CITIES = 'FETCH_CITIES';\nexport const SET_CITIES = 'SET_CITIES';\n\nexport const FETCH_FRIENDS = 'FETCH_FRIENDS';\nexport const SET_FRIENDS = 'SET_FRIENDS';\nexport const CREATE_FRIEND_REQ = 'CREATE_FRIEND_REQ';\nexport const ACCEPT_FRIEND_REQ = 'ACCEPT_FRIEND_REQ';\n\nexport const FETCH_USER = 'FETCH_USER'\nexport const SET_USERS = 'SET_USERS';\n\nexport const LOGOUT = 'LOGOUT';\nexport const API = 'API';\nexport const API_START = 'API_START';\nexport const API_END = 'API_END';\nexport const ACCESS_DENIED = 'ACCESS_DENIED';\nexport const API_ERROR = 'API_ERROR';\n\nexport const ENTITY_CITIES = 'ENTITY::CITIES';\nexport const ENTITY_TRIPS = 'ENTITY::TRIPS';\n","//\n// Expose friendly names for .env file variables\n//\nexport const apiUrl = process.env.REACT_APP_API_URL;\nexport const botName = process.env.REACT_APP_TELEGRAM_BOT;\n","import {\n  API,\n\n  LOGOUT,\n\n  FETCH_TRIPS,\n  FETCH_TRIP,\n  SET_TRIPS,\n  CREATE_TRIP,\n  UPDATE_TRIP,\n  DELETE_TRIP,\n  REMOVE_TRIP,\n\n  FETCH_FRIENDS,\n  CREATE_FRIEND_REQ,\n  ACCEPT_FRIEND_REQ,\n\n  FETCH_USER,\n  SET_USERS,\n\n  FETCH_CITIES,\n  SET_CITIES,\n} from './types';\n\nimport { apiUrl } from '../config';\n\nexport function logout() {\n  return {\n    type: LOGOUT,\n  };\n}\n\nexport function fetchFriends() {\n  return apiAction({\n    url: `${apiUrl}/u/friends/`,\n    onSuccess: setUsers,\n    onFailure: () => console.log('Error occured loading friends'),\n    label: FETCH_FRIENDS,\n  });\n}\n\nexport function acceptFriendRequest(data) {\n  return apiAction({\n    url: `${apiUrl}/u/${data.id}/friends/`,\n    method: 'PUT',\n    // HACK: Need the API to return the updated user object\n    onSuccess: () => setUsers({\n      data: {\n        ...data,\n        is_friend: true,\n        is_pending_friend: false\n      }\n    }),\n    nextAction: fetchTrips,\n    onFailure: () => console.log('Error occured accepting friendship request'),\n    data: data,\n    label: ACCEPT_FRIEND_REQ,\n  });\n}\n\nexport function requestFriendship(data) {\n  return apiAction({\n    url: `${apiUrl}/u/${data.id}/friends/`,\n    method: 'POST',\n    // HACK: Need the API to return the updated user object\n    onSuccess: () => setUsers({\n      data: {\n        ...data,\n        have_requested_friend: true\n      }\n    }),\n    onFailure: () => console.log('Error occured requesting friendship'),\n    data: data,\n    label: CREATE_FRIEND_REQ,\n  });\n}\n\nexport function fetchUser(id) {\n  return apiAction({\n    url: `${apiUrl}/u/${id}/`,\n    onSuccess: setUsers,\n    onFailure: () => console.log('Error occured loading user', id),\n    label: FETCH_USER,\n  });\n}\n\nexport function setUsers(data) {\n  return {\n    type: SET_USERS,\n    payload: data,\n  };\n}\n\nexport function fetchCities() {\n  return apiAction({\n    url: `${apiUrl}/cities/`,\n    onSuccess: setCities,\n    onFailure: () => console.log('Error occured loading cities'),\n    label: FETCH_CITIES,\n  });\n}\n\nfunction setCities(data) {\n  return {\n    type: SET_CITIES,\n    payload: data,\n  };\n}\n\nexport function fetchTrip(id) {\n  return apiAction({\n    url: `${apiUrl}/trips/${id}`,\n    onSuccess: setTrips,\n    onFailure: () => console.log('Error occured loading trips'),\n    label: FETCH_TRIP,\n  });\n}\n\nexport function fetchTrips() {\n  return apiAction({\n    url: `${apiUrl}/trips/`,\n    onSuccess: setTrips,\n    onFailure: () => console.log('Error occured loading trips'),\n    label: FETCH_TRIPS,\n  });\n}\n\nfunction setTrips(data) {\n  return {\n    type: SET_TRIPS,\n    payload: data,\n  };\n}\n\nfunction removeTrip(data) {\n  return {\n    type: REMOVE_TRIP,\n    payload: data,\n  };\n}\n\nexport function createTrip(data) {\n  return apiAction({\n    url: `${apiUrl}/trips/`,\n    method: 'POST',\n    onSuccess: setTrips,\n    onFailure: () => console.log('Error occured creating trip'),\n    data: data,\n    label: CREATE_TRIP,\n  });\n}\n\nexport function updateTrip(data) {\n  return apiAction({\n    url: `${apiUrl}/trips/${data.id}`,\n    method: 'PUT',\n    onSuccess: setTrips,\n    onFailure: () => console.log('Error occured updating trip'),\n    data: data,\n    label: UPDATE_TRIP,\n  });\n}\n\nexport function deleteTrip(data) {\n  return apiAction({\n    url: `${apiUrl}/trips/${data.id}`,\n    method: 'DELETE',\n    onFailure: () => console.log('Error occured deleting trip'),\n    onSuccess: () => removeTrip(data),\n    label: DELETE_TRIP,\n  });\n}\n\nfunction apiAction({\n  url = '',\n  method = 'GET',\n  data = null,\n  accessToken = null,\n  onSuccess = () => {},\n  onFailure = () => {},\n  nextAction = () => {},\n  label = '',\n  headersOverride = null\n}) {\n  return {\n    type: API,\n    payload: {\n      url,\n      method,\n      data,\n      accessToken,\n      onSuccess,\n      onFailure,\n      label,\n      headersOverride,\n      nextAction\n    }\n  };\n}\n","import isBefore from 'date-fns/is_before';\nimport addDays from 'date-fns/add_days'\nimport subDays from 'date-fns/sub_days'\n\n// Disable any dates that you already have trips on (allowing 1 day overlap)\nexport function determineAlreadySelectedTripDates(trips) {\n  return trips.map(t => ({\n    from: addDays(t.start_date, 1),\n    to: subDays(t.end_date, 1)\n  }));\n}\n\n// Determine the next gap in the dates of n days\nexport function determineNextFreeDate(trips, n) {\n  const nextFreeDate = trips.reduce(\n    (lastChecked, nextTrip) => {\n\n      // Only allow a gap to be auto-selected if there are n days available\n      if (isBefore(addDays(lastChecked, n- 1), nextTrip.start_date)) {\n        return lastChecked;\n      }\n\n      return new Date(nextTrip.end_date);\n    },\n    Date.now()\n  );\n  return [nextFreeDate, addDays(nextFreeDate, n)];\n}\n","import React, { useState, useEffect } from 'react';\nimport { List } from 'react-virtualized';\nimport ReactCountryFlag from 'react-country-flag';\n\nimport { determineNextFreeDate } from '../helpers/dateUtils';\n\nimport format from 'date-fns/format';\n\nimport Select from 'react-select';\nimport Flatpickr from 'react-flatpickr'\n\nimport 'flatpickr/dist/themes/light.css'\n\n//\n// Virtualized Select Component\n//\nconst MenuList = props => {\n  const rows = props.children;\n  const rowRenderer = ({ key, index, isScrolling, isVisible, style }) => (\n    <div key={key} style={style}>{rows[index]}</div>\n  );\n\n  return (\n    <List\n      style={{ width: '100%', flexGrow: true }}\n      width={props.width}\n      height={300}\n      rowHeight={35}\n      rowCount={rows.length || 0}\n      rowRenderer={rowRenderer}\n    />\n  );\n}\n\nconst convertToSelectOpts = i => i.map(i => ({\n  label: <div><ReactCountryFlag code={i.country_code} svg /> {i.name}</div>,\n  value: `${i.name}:::${i.id}`\n}));\n\nfunction NewTrip ({ cities, trips, disabledDates, onCreateTrip }) {\n  // Default to the next free day and no city selected\n  const [dates, setDates] = useState(determineNextFreeDate(trips, 4));\n  const [city, setCity] = useState(null);\n\n  //\n  // Make sure the default dates stay up to date when a new trip is created\n  //\n  useEffect(\n    () => {\n      setDates(determineNextFreeDate(trips, 4));\n    },\n    [trips.map(t => t.id).join('-')]\n  );\n\n  //\n  // Package up the state as a trip object and pass it back up\n  //\n  const createTrip = (e) => {\n    e.preventDefault();\n    onCreateTrip({\n      city: parseInt(city.value.split(':::')[1], 10),\n      start_date: format(dates[0], 'YYYY-MM-DD'),\n      end_date: format(dates[1], 'YYYY-MM-DD'),\n    });\n    setCity(null);\n  };\n\n  // Order cities by population for now\n  const citiesList = Object.keys(cities.all)\n    .map(cId => cities.all[cId]);\n  citiesList.sort((a, b) => b.population - a.population);\n\n  return <form className='uk-tile new-trip-form uk-padding-small uk-flex uk-flex-around uk-flex-middle'>\n    <div>\n      <Select\n        styles={{\n          container: () => ({\n            width: 250\n          }),\n          menu: (provided) => ({\n            ...provided,\n            top: null\n          }),\n        }}\n        components={{\n          MenuList: (props)=> <MenuList {...props} width={window.innerWidth} />\n        }}\n        placeholder='New Trip Location'\n        className='country-picker'\n        isSearchAble\n        isLoading={cities.isFetching}\n        value={city}\n        onChange={setCity}\n        options={convertToSelectOpts(citiesList)}\n      />\n    </div>\n    <Flatpickr\n      className='uk-input uk-width-1-3@m'\n      options={{\n        mode: 'range',\n        disable: disabledDates,\n        dateFormat: 'Y-m-d',\n      }}\n      value={dates}\n      onChange={setDates}\n    />\n    <button\n      className='uk-button uk-button-secondary'\n      onClick={createTrip}\n      disabled={city === null}\n    >\n      <span className='icono-plus'/>\n    </button>\n  </form>;\n}\n\nexport default NewTrip;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst FriendChip = ({ id, first_name, last_name, username, photo_url, photoOnly }) => {\n  const photoSrc = photo_url || '/blank-profile-picture.png';\n  const tooltipText = username || `${first_name} ${last_name}`;\n\n  if (photoOnly) {\n    return <div className='uk-border-circle friend-chip'>\n      <img className='uk-border-circle avatar-preview' alt='avatar' src={photoSrc} />\n    </div>;\n  }\n\n  return <Link className='uk-border-circle friend-chip' to={`/users/${id}`}>\n    <img className='uk-border-circle avatar-preview' alt='avatar' src={photoSrc} />\n    <div className='uk-badge tooltip'>{tooltipText}</div>\n  </Link>;\n};\n\nexport default FriendChip;\n","import React from 'react';\n\nimport getMonth from 'date-fns/get_month'\nimport getDate from 'date-fns/get_date'\nimport differenceInDays from 'date-fns/difference_in_days'\n\nconst MONTHS = [\n  'JAN',\n  'FEB',\n  'MAR',\n  'APR',\n  'MAY',\n  'JUN',\n  'JUL',\n  'AUG',\n  'SEP',\n  'OCT',\n  'NOV',\n  'DEC'\n];\n\nconst DateRange = ({ start_date, end_date }) =>\n  <div className='uk-flex date-range'>\n    <div>\n      <b>{getDate(start_date)} <br/> {MONTHS[getMonth(start_date)]}</b>\n    </div>\n    <div>\n      <b>{getDate(end_date)} <br/> {MONTHS[getMonth(end_date)]}</b>\n    </div>\n    <p\n      style={{\n        width: 92,\n        height: 42,\n        fontSize: 16,\n        textAlign: 'center',\n        margin: 2,\n        marginTop: 10\n     }}\n    >\n      {differenceInDays(end_date, start_date)} Day Trip\n    </p>\n  </div>;\n\nexport default DateRange;\n","import React, { Fragment, useState } from 'react';\nimport { withRouter, Link } from 'react-router-dom';\n\nimport ReactCountryFlag from 'react-country-flag';\nimport Flatpickr from 'react-flatpickr';\n\nimport format from 'date-fns/format';\nimport addDays from 'date-fns/add_days';\nimport subDays from 'date-fns/sub_days';\n\nimport FriendChip from './FriendChip.react';\nimport DateRange from './DateRange.react';\n\nfunction TripCard({ onUpdate, onDelete, disabledDates, ...props}) {\n\n  const { id, city, start_date, end_date, matches } = props;\n\n  const [editMode, setEditMode] = useState(false);\n  const [promptDel, setPromptDel] = useState(false);\n  const [dates, setDates] = useState([new Date(start_date), new Date(end_date)]);\n\n  const updateTrip = () => {\n    setEditMode(false);\n    return onUpdate({\n      id,\n      city: city.id,\n      start_date: format(dates[0], 'YYYY-MM-DD'),\n      end_date: format(dates[1], 'YYYY-MM-DD'),\n    });\n  };\n\n  const disabledDatesMinusThoseForThisTrip = disabledDates.filter(({ from, to }) =>\n    !(\n      format(addDays(start_date, 1), 'YYYY-MM-DD') === format(from, 'YYYY-MM-DD') &&\n      format(subDays(end_date, 1), 'YYYY-MM-DD')   === format(to, 'YYYY-MM-DD')\n     )\n  );\n\n  const deleteTrip = () => onDelete({ id });\n\n  if (promptDel) {\n    return <Fragment>\n      <div className='uk-tile uk-padding-small uk-flex uk-flex-between uk-background-muted'>\n        <div>\n          <h6>\n             <ReactCountryFlag code={city.country_code} svg /> | {city.name}\n          </h6>\n        </div>\n          <p>Confirm you would like to delete this trip</p>\n          <span className='uk-flex'>\n            <hr className='uk-divider-vertical uk-margin-right uk-margin-left' />\n            <span className='uk-flex uk-flex-column'>\n              <span className='icon-sm'>\n                <span className='icono-check' onClick={deleteTrip} />\n              </span>\n              <span className='icon-sm'>\n                <span className='icono-cross' onClick={(e) => setPromptDel(false)} />\n              </span>\n            </span>\n          </span>\n      </div>\n      <hr />\n    </Fragment>;\n  }\n\n  if (editMode) {\n    return <Fragment>\n      <div className='uk-tile uk-padding-small uk-flex uk-flex-between uk-background-muted'>\n        <div>\n          <h6>\n             <ReactCountryFlag code={city.country_code} svg /> | {city.name}\n          </h6>\n        </div>\n          <Flatpickr\n            className='uk-input uk-width-1-3'\n            options={{\n              mode: 'range',\n              disable: disabledDatesMinusThoseForThisTrip,\n            }}\n            value={dates}\n            onChange={setDates}\n          />\n          <span className='uk-flex'>\n            <hr className='uk-divider-vertical uk-margin-right uk-margin-left' />\n            <span className='uk-flex uk-flex-column'>\n              <span className='icon-sm'>\n                <span className='icono-check' onClick={updateTrip} />\n              </span>\n              <span className='icon-sm'>\n                <span className='icono-cross' onClick={(e) => setEditMode(!editMode)} />\n              </span>\n            </span>\n          </span>\n      </div>\n      <hr />\n    </Fragment>;\n  }\n\n  return <Fragment>\n    <div\n      className='uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted'\n    >\n      <Link to={`/trips/${id}`} >\n        <h6>\n           <ReactCountryFlag code={city.country_code} svg /> | {city.name}\n        </h6>\n        <DateRange start_date={start_date} end_date={end_date} />\n      </Link>\n      <span className='uk-flex'>\n        <span className='uk-flex'>\n          {matches.slice(0, 3).map(m => <FriendChip key={m.id} {...m} />)}\n          <ExtraFriends allFriends={matches} numDisplayed={3} />\n        </span>\n        <span className='uk-flex'>\n            <hr className='uk-divider-vertical uk-margin-right uk-margin-left' />\n          <span className='uk-flex uk-flex-column' >\n            <span className='icon-sm'>\n              <span className='icono-gear' onClick={(e) => {e.preventDefault();setEditMode(!editMode);}} />\n            </span>\n            <span className='icon-sm'>\n              <span className='icono-trash' onClick={(e) => {e.preventDefault();setPromptDel(true);}} />\n            </span>\n          </span>\n        </span>\n      </span>\n    </div>\n    <hr />\n  </Fragment>;\n}\n\nconst ExtraFriends = ({ allFriends, numDisplayed }) => {\n  if (allFriends.length > numDisplayed) {\n    return <div className='uk-border-circle avatar-preview uk-background-muted'>\n      <p className='uk-border-circle uk-dark'>\n        +{allFriends.length - numDisplayed}\n      </p>\n    </div>;\n  }\n  return null;\n};\n\nexport default withRouter(TripCard);\n","import React from 'react';\nimport './Spinner.css';\n\nconst Spinner = () => <div className='spinner-container'>\n    <div className='lds-ripple'><div></div><div></div></div>\n  </div>;\n\nexport default Spinner;\n","//\n// Page with a list of trips for the user\n//\nimport React, { Fragment, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchTrips, fetchCities, createTrip, fetchFriends, updateTrip, deleteTrip } from '../actions';\n\nimport differenceInDays from 'date-fns/difference_in_days';\nimport { determineAlreadySelectedTripDates } from '../helpers/dateUtils';\n\nimport NewTrip from '../components/NewTrip.react';\nimport TripCard from '../components/TripCard.react';\nimport Spinner from '../components/Spinner.react';\n\nfunction TripDashboard(props) {\n  // Get data out of redux\n  const { cities, trips, users } = props;\n\n  // Load API data for page\n  useEffect(\n    () => {\n      if (!cities.isFetching && !cities.hasFetched) {\n        props.fetchCities();\n      }\n      if (!trips.isFetching && !trips.hasFetched) {\n        props.fetchTrips();\n      }\n    },\n    []\n  );\n\n  const populatedTrips = trips.ids.map(tId => {\n    const trip = trips.all[tId];\n    return {\n      ...trip,\n      city: cities.all[trip.city],\n      matches: trip.matches.map(match => {\n        const [uId, start, end] = match.split('::');\n        return {\n          ...users.all[uId],\n          start_date: start,\n          end_date: end\n        };\n      })\n    };\n  });\n\n  // Sort so the soonest trip is first in the list\n  populatedTrips.sort((a, b) => differenceInDays(a.start_date, b.start_date));\n\n  const disabledDates = determineAlreadySelectedTripDates(populatedTrips);\n\n  return (\n    <Fragment>\n\n      <h4>ADD NEW TRIP</h4>\n      <NewTrip\n        cities={cities}\n        trips={populatedTrips}\n        isLoadingCities={cities.isFetching}\n        onCreateTrip={props.createTrip}\n        disabledDates={disabledDates}\n      />\n\n      <TripsList\n        trips={populatedTrips}\n        updateTrip={props.updateTrip}\n        deleteTrip={props.deleteTrip}\n        disabledDates={disabledDates}\n      />\n\n    </Fragment>\n  );\n}\n\nfunction TripsList({ trips, disabledDates, updateTrip, deleteTrip }) {\n  if (trips.isFetching) {\n    return <Spinner />;\n  }\n\n  if (trips.length === 0) {\n    return <p>\n      You have no upcoming trips. Hope you enjoy your rest.\n    </p>;\n  }\n\n  // TODO: Pagination / see historic etc\n\n  return <Fragment>\n    <h4>UPCOMING TRIPS</h4>\n    {trips.map(trip => \n      <TripCard\n        key={trip.id}\n        onUpdate={updateTrip}\n        onDelete={deleteTrip}\n        disabledDates={disabledDates}\n        {...trip}\n      />\n    )}\n  </Fragment>;\n}\n\nconst mapStateToProps = ({ cities, trips, users }) => ({\n  cities,\n  trips,\n  users,\n});\n\nexport default connect(\n  mapStateToProps,\n  {\n    fetchTrips,\n    fetchCities,\n    fetchFriends,\n    createTrip,\n    updateTrip,\n    deleteTrip\n  }\n)(TripDashboard);\n","import React, { Fragment } from 'react';\nimport { Link } from 'react-router-dom';\nimport ReactCountryFlag from 'react-country-flag';\n\nimport FriendChip from './FriendChip.react';\n\nimport differenceInDays from 'date-fns/difference_in_days';\nimport getOverlappingDaysInRanges from 'date-fns/get_overlapping_days_in_ranges';\nimport format from 'date-fns/format';\n\nconst TripPanel = ({ city, start_date, end_date, matches, isActive }) => (\n  <dl className='uk-description-list'>\n    <dt>\n       Location\n    </dt>\n    <dd className='uk-padding-small'>\n      <span className='uk-padding-small'>{city.name}</span>\n      <ReactCountryFlag code={city.country_code} svg />\n    </dd>\n    <dt>Duration</dt>\n    <dd className='uk-padding-small'>\n      <span className='uk-padding'>\n        You will be in {city.name} for {differenceInDays(end_date, start_date)} Days\n      </span>\n      <OverlapBar start_date={start_date} end_date={end_date} to={end_date} from={start_date} />\n    </dd>\n    <OverlappingFriends matches={matches} start_date={start_date} end_date={end_date} />\n  </dl>\n);\n\nconst OverlappingFriends = ({ matches, start_date, end_date }) => {\n\n  if (matches.length === 0) {\n    return <p>None of your friends trips are currently overlapping with this one.\n      Maybe you need to add some people you know to improve your chances?\n    </p>;\n  }\n\n  return <Fragment>\n    <dt>\n      Friends with overlapping dates\n    </dt>\n    <dd>\n      <span className='uk-padding'>\n        {matches.map(m => <OverlapGraph\n          key={m.id}\n          {...m}\n          from={start_date}\n          to={end_date}\n        />)}\n      </span>\n    </dd>\n  </Fragment>\n};\n\nconst OverlapGraph = ({ id, first_name, last_name, username, photo_url, start_date, end_date, from, to }) => (\n  <div className='overlap-graph'>\n    <div className='uk-flex uk-flex-middle'>\n      <FriendChip\n        id={id}\n        username={username}\n        first_name={first_name}\n        last_name={last_name}\n        photo_url={photo_url}\n        photoOnly\n      />\n      <Link to={`/users/${id}`} className='chip-label uk-link-muted'>@{username}</Link>\n    </div>\n    <OverlapBar start_date={start_date} end_date={end_date} to={to} from={from} />\n  </div>\n);\n\nconst OverlapBar = ({ id, start_date, end_date, from, to }) => {\n  const totalLength = differenceInDays(to, from);\n  const daysFromStart = differenceInDays(start_date, from);\n  const daysOverlap = getOverlappingDaysInRanges(from, to, start_date, end_date);\n\n  const STYLES = {\n    width: `${Math.floor((daysOverlap * 80) / totalLength)}%`,\n  };\n  const START_STYLES = {\n    marginLeft: `${Math.max(Math.floor((daysFromStart * 80) / totalLength) - 5, 0)}%`,\n  };\n\n  // TODO: This look gross ATM\n  return null;\n  return <div className='uk-flex uk-flex-around uk-padding-small'>\n    <span className='date-icon' style={START_STYLES}>\n      {format(start_date, 'DD MMM')}\n    </span>\n    <li className='uk-list overlap-bar' style={STYLES}>{daysOverlap} Days</li>\n    <span className='date-icon'>\n      {format(end_date, 'DD MMM')}\n    </span>\n  </div>;\n};\n\nexport default TripPanel;\n","import React, { Fragment, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchTrip } from '../actions';\n\nimport TripPanel from '../components/TripPanel.react';\nimport Spinner from '../components/Spinner.react';\n\nconst TripDetail = ({ match, trips, cities, users, fetchTrip }) => {\n  const tripId = parseInt(match.params.id, 10);\n\n  // Clone the trip\n  let trip = trips.all[tripId];\n  if (trip) {\n    trip = {\n      ...trip,\n      city: cities[trip.city],\n      matches: trip.matches.map(match => {\n        const [uId, start, end] = match.split('::');\n        return {\n          ...users.all[uId],\n          start_date: start,\n          end_date: end\n        };\n      })\n    };\n  }\n\n  useEffect(\n    () => {\n      // Get it from the API if:\n      //   - it is not currently fetching trips\n      //   - we don't have the trip in the store already\n      if (!trips.isFetching && !trip) {\n        fetchTrip(tripId);\n      }\n    },\n    []\n  );\n\n  return <Fragment>\n    <h4>TRIP SUMMARY</h4>\n    <MainPanel isFetching={trips.isFetching} trip={trip} />\n  </Fragment>\n};\n\nconst MainPanel = ({ isFetching, trip }) => {\n  if (isFetching || !trip) {\n    return <Spinner />;\n  }\n  return <TripPanel {...trip} />;\n}\n\nconst mapStateToProps = ({ trips, users, cities }) => ({\n  trips,\n  users,\n  cities: cities.all\n})\n\nexport default connect(\n  mapStateToProps,\n  {\n    fetchTrip\n  }\n)(TripDetail);\n","import React from 'react';\n\nconst FriendshipStatus = ({ user, onRequest, onAccept }) => {\n  if (user && user.is_you) {\n    return <button\n      className='uk-button uk-flex icon-sm'\n      disabled\n    >\n        <span className='icono-smile'/>\n        You\n    </button>;\n  }\n  if (user && user.is_friend) {\n    return <button\n      className='uk-button uk-flex icon-sm'\n      disabled\n    >\n        <span className='icono-check'/>\n        Friends\n    </button>;\n  }\n  if (user && user.is_pending_friend) {\n    return <button\n      onClick={onAccept}\n      className='uk-button uk-flex icon-sm'>\n        Accept\n    </button>;\n  }\n  if (user && user.have_requested_friend) {\n    return <button\n      className='uk-button uk-flex icon-sm'\n      disabled\n    >\n        <span className='icono-clock'/>\n        Waiting\n    </button>;\n  }\n\n  return <button\n    className='uk-button uk-flex icon-sm'\n    onClick={onRequest}>\n      <span className='icono-plus'/>\n      Request\n  </button>;\n}\n\nexport default FriendshipStatus;\n\n","import React, { useState, useEffect, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\n\nimport { apiUrl } from '../config';\n\nimport FriendChip from './FriendChip.react';\nimport FriendStatusButton from './FriendStatusButton.react';\n\n// TODO:\n//  - integrate with search API\n//  - present results effectively\n//  - request button\nfunction FriendSearch ({ users, onRequestFriend, onAcceptFriend, fetchFriends }) {\n  const [results, setResults] = useState([]);\n  const [phrase, setPhrase] = useState('');\n\n  // Each time the user types, we send a search query.\n  //\n  // TODO: \n  // - Should this be debounced?\n  // - Encoding query strings\n  //\n  useEffect(\n    () => {\n      const CancelToken = axios.CancelToken;\n      const source = CancelToken.source();\n\n      if (phrase) {\n        axios.get(`${apiUrl}/u/search/?q=${phrase}`, {\n          cancelToken: source.token,\n          withCredentials: true,\n        })\n          .then(({ data }) => setResults(data.data))\n          .catch(err => {\n\n            // All good.\n            if (err && err.message === 'unmount') {\n              return;\n            }\n\n            // TODO: Handle this!\n            console.log(err);\n          });\n      } else {\n        setResults([]);\n      }\n\n      // Cancel the request if the component is unmounted\n      return () => source.cancel('unmount');\n    },\n    [phrase]\n  );\n\n  return <div className='uk-padding-small'>\n    <input\n      className='uk-input'\n      placeholder='Search for Telegram Username / Full Name'\n      value={phrase}\n      onChange={e => setPhrase(e.target.value)}\n    />\n    <hr />\n    <dl className='uk-description-list' >\n      {results.map(r => {\n\n        // Get friend object so we can tell if we're friends with each search result\n        const friendObj = users.all[r.id];\n\n        // Don't show yourself in search results\n        if (friendObj && friendObj.is_you) {\n          return null;\n        }\n\n        return <Fragment key={r.id}>\n          <dt>{r.username}</dt>\n          <dd className='uk-padding-small uk-flex uk-flex-between'>\n            <span className='uk-flex'>\n              <FriendChip {...r} photoOnly={!friendObj || !friendObj.is_friend} />\n              <p>{r.first_name} {r.last_name}</p>\n            </span>\n            <span className='uk-flex'>\n              <hr style={{ height: 30 }} className='uk-divider-vertical uk-margin-right uk-margin-left' />\n              <FriendStatusButton\n                user={friendObj}\n                onAccept={() => onAcceptFriend(r)}\n                onRequest={() => onRequestFriend(r)}\n              />\n            </span>\n          </dd>\n        </Fragment>;\n      })}\n    </dl>\n  </div>;\n}\n\nconst mapStateToProps = ({ users }) => ({\n  users\n});\n\nexport default connect(\n  mapStateToProps,\n  {\n    \n  }\n)(FriendSearch);\n","import React, { Fragment, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchFriends, requestFriendship, acceptFriendRequest } from '../actions';\n\nimport Spinner from '../components/Spinner.react';\nimport FriendChip from '../components/FriendChip.react';\nimport FriendSearch from '../components/FriendSearch.react';\nimport FriendStatusButton from '../components/FriendStatusButton.react';\n\nconst FriendsList = ({ users, fetchFriends, requestFriendship, acceptFriendRequest, activeUser }) => {\n  useEffect(\n    () => {\n      if (!users.isFetching) {\n        fetchFriends();\n      }\n    },\n    []\n  );\n\n  return <Fragment>\n    <MainPanel\n      isFetching={users.isFetching && users.ids.length === 0}\n      users={users}\n      activeUser={activeUser}\n      acceptFriendRequest={acceptFriendRequest}\n      requestFriendship={requestFriendship}\n    />\n  </Fragment>;\n};\n\nconst MainPanel = ({ isFetching, users, activeUser, acceptFriendRequest, requestFriendship }) => {\n  if (isFetching) {\n    return <Spinner />;\n  }\n\n  const friendList = Object.keys(users.all)\n    .filter(uId => parseInt(uId, 10) !== activeUser)\n    .map(uId => users.all[uId]);\n\n  const accepted = friendList.filter(f => f.is_friend);\n  const hasFriends = accepted.length > 0;\n  const pending = friendList.filter(f => f.is_pending_friend);\n  const hasPendingFriends = pending.length > 0;\n\n  return <Fragment>\n    {hasFriends && <h4>FRIENDS</h4>}\n    {accepted.map(f => <FriendChip key={f.id} {...f} />)}\n    {hasPendingFriends && <h4>PENDING REQUESTS</h4>}\n    {pending.map(f => <Fragment key={f.id}>\n      <FriendChip {...f} onAccept={() => acceptFriendRequest(f)} />\n      <FriendStatusButton \n        user={f}\n        onAccept={() => acceptFriendRequest(f)}\n      />\n    </Fragment>)}\n    <h4>FIND FRIENDS</h4>\n    <FriendSearch \n      users={users}\n      onRequestFriend={requestFriendship}\n      onAcceptFriend={acceptFriendRequest}\n    />\n  </Fragment>;\n}\n\nconst mapStateToProps = ({ users, activeUser }) => ({\n  users,\n  activeUser\n})\n\nexport default connect(\n  mapStateToProps,\n  {\n    fetchFriends,\n    requestFriendship,\n    acceptFriendRequest\n  }\n)(FriendsList);\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Map, Marker, Popup, TileLayer, Polyline } from 'react-leaflet'\nimport { divIcon } from 'leaflet';\n\nimport { apiUrl } from '../config';\n\nimport Spinner from './Spinner.react';\n\n// Custom Icon for the leaftlet map.\nconst locationIcon = divIcon({\n  html: '<span class=\"icono-caretDown\"/>',\n  iconSize: [25, 25],\n  iconAnchor: [17, 24],\n  popupAnchor: [-3, -26],\n});\n \nconst LocationMap = ({ userId }) => {\n  const [locations, setLocations] = useState(null);\n\n  const fetchUserLocations = (id) => {\n    if (!id) {\n      return;\n    }\n    setLocations(null);\n    return axios(`${apiUrl}/u/${id}/locations/`, { withCredentials: true })\n      .then(res => {\n        if (res.status === 200) {\n          setLocations(res.data.data);\n        } else if (res.status === 404) {\n          setLocations([]);\n        }\n      });\n  };\n\n  useEffect(\n    () => {\n      fetchUserLocations(userId);\n    },\n    [userId]\n  );\n\n  // TODO: timing calcs\n  const pLocations = []; // locations.filter();\n  const fLocations = locations; // .filter();\n  // const cLocation = null; // locations.find();\n\n  const position = [51.505, -0.09];\n\n  if (locations === null) {\n    return <Spinner />;\n  }\n\n  return <Map center={position} zoom={1} style={{ height: 300 }}>\n    <TileLayer\n      url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      attribution=\"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\"\n    />\n    <Polyline\n      positions={pLocations.map(({ city }) => [city.latitude, city.longitude])}\n    />\n    <Polyline\n      positions={fLocations.map(({ city }) => [city.latitude, city.longitude])}\n      color='#bf4e4e'\n    />\n    {locations.map(({ id, city, start_date, end_date }) => (\n      <Marker\n        key={id}\n        position={[city.latitude, city.longitude]}\n        icon={locationIcon}\n      >\n        <Popup>{city.name}</Popup>\n      </Marker>\n    ))}\n  </Map>\n};\n\nexport default LocationMap;\n\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n  fetchUser,\n  requestFriendship,\n  acceptFriendRequest\n} from '../actions';\n\nimport Spinner from '../components/Spinner.react';\nimport FriendStatusButton from '../components/FriendStatusButton.react';\nimport LocationMap from '../components/LocationMap.react';\n\nconst UserProfile = ({ match, users, fetchUser, activeUser, requestFriendship, acceptFriendRequest }) => {\n  const userId = parseInt(match.params.id, 10);\n\n  // Clone the trip\n  let user = users.all[userId];\n\n  useEffect(\n    () => {\n      // Get it from the API if:\n      //   - it is not currently fetching users\n      //   - we don't have the user in the store already\n      if (!users.isFetching && !user) {\n        fetchUser(userId);\n      }\n    },\n    []\n  );\n\n  return <MainPanel\n    isFetching={users.isFetching}\n    user={user}\n    activeUser={activeUser}\n    onRequest={() => requestFriendship(user)}\n    onAccept={() => acceptFriendRequest(user)}\n  />;\n};\n\nconst MainPanel = ({ isFetching, user, activeUser, onRequest, onAccept }) => {\n  if (isFetching || !user) {\n    return <Spinner />;\n  }\n\n  return <div className='centered-hero'>\n    <div className='uk-flex uk-flex-left'>\n      <img\n        className='avatar-big uk-border-circle'\n        alt='avatar'\n        src={user.photo_url || '/blank-profile-picture.png'}\n      />\n\n      <div className='uk-flex uk-flex-column uk-padding'>\n        <h4>@{user.username}</h4>\n        <span>{user.first_name.toUpperCase()} {user.last_name.toUpperCase()}</span>\n      </div>\n\n      <div className='user-icons'>\n        <FriendStatusButton user={user} onRequest={onRequest} onAccept={onAccept} />\n      </div>\n    </div>\n\n    <hr />\n\n    <LocationMap userId={user.id} />\n  </div>;\n}\n\nconst mapStateToProps = ({ users, activeUser }) => ({\n  users,\n  activeUser\n})\n\nexport default connect(\n  mapStateToProps,\n  {\n    fetchUser,\n    requestFriendship,\n    acceptFriendRequest\n  }\n)(UserProfile);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      rest.cookies.get('sessionid') ? (\n        <Component {...props} />\n      ) : (\n        <Redirect\n          to={{\n            pathname: \"/login\"\n          }}\n        />\n      )\n    }\n  />\n);\n\nexport default withCookies(PrivateRoute);\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport axios from 'axios';\nimport { stringify } from 'query-string';\nimport TelegramLoginButton from 'react-telegram-login';\n\nimport { apiUrl, botName } from '../config';\n\nclass Login extends Component {\n\n  state = {\n    errMsg: null\n  };\n\n  handleResponse = (data) => {\n    return axios({\n      url: `${apiUrl}/u/auth/?${stringify(data)}`,\n      method: 'get',\n      withCredentials: true\n    })\n      .then(res => {\n        // Pass the user data back to the main app\n        this.props.onLogin(data);\n      })\n      .catch(err => {\n        if (err.response) {\n          const errMsg = (err.response.data && err.response.data.errors && err.response.data.errors[0]) ||\n            err.response;\n\n          this.setState({ errMsg });\n        } else {\n          this.setState({ errMsg: 'Unable to connect to the API' });\n        }\n      });\n  }\n\n  render() {\n    return <section className='uk-flex uk-flex-center'>\n      <div className='uk-panel uk-panel-box uk-text-center telegram-login-container'>\n        <img src='/logo.png' alt='logo' style={{ height: 55, paddingRight: 15, paddingLeft: 15 }} />\n        <h1>LOCATIONLESS</h1>\n        <hr />\n        <TelegramLoginButton\n          dataOnauth={this.handleResponse}\n          botName={botName}\n        />\n        <hr/>\n        <p>You will need an account on <a target=\"_blank\" href=\"https://telegram.org\">Telegram</a> to get started</p>\n      </div>\n    </section>;\n  }\n}\n\nexport default withRouter(Login);\n\n","import React, { useState, Fragment } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\n\nconst Header = ({ cookies, onLogout, activeUser, history }) => {\n  if (!activeUser || !cookies.get('sessionid')) {\n    return null;\n  }\n  return <div className='uk-navbar-container'>\n    <nav className='uk-navbar uk-container'>\n      <div className='uk-navbar-left'>\n        <MobileNavbar activeUser={activeUser} onLogout={onLogout} history={history} />\n        <Link className='uk-navbar-item uk-logo' to='/'>\n          <img src='/logo.png' alt='logo' style={{ height: 35, paddingRight: 15, paddingLeft: 15 }} />\n          Locationless\n        </Link>\n      </div>\n      \n      <DesktopNavbar activeUser={activeUser} onLogout={onLogout} />\n    </nav>\n  </div>\n};\n\nconst MobileNavbar = ({ activeUser, onLogout, history }) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const navigateTo = to => {\n    setIsOpen(false);\n    history.push(to);\n  };\n  const logout = () => {\n    setIsOpen(false);\n    onLogout();\n  };\n\n  return <Fragment>\n    <div className='uk-navbar-item uk-hidden@s' onClick={() => setIsOpen(!isOpen)}>\n      <div className='icono-hamburger' onClick={() => setIsOpen(!isOpen)} />\n    </div>\n    {isOpen && <div className='fullscreen-mobile-menu'>\n      <ul className='uk-list'>\n        <li className='uk-navbar-item' onClick={() => setIsOpen(!isOpen)}>\n          <div className='icono-cross'/>\n        </li>\n        <li className='uk-navbar-item' onClick={() => navigateTo('/')}>\n          <h4>DASHBOARD</h4>\n        </li>\n        <li className='uk-navbar-item' onClick={() => navigateTo('/friends')}>\n          <h4>FRIENDS</h4>\n        </li>\n        <li className='uk-navbar-item' onClick={() => navigateTo(`/users/${activeUser}`)}>\n          <h4>PROFILE</h4>\n        </li>\n        <li className='uk-navbar-item' onClick={() => logout()}>\n          <h4>LOGOUT</h4>\n        </li>\n      </ul>\n    </div>}\n  </Fragment>\n};\n\n\n\nconst DesktopNavbar = ({ activeUser, onLogout }) => (\n  <div className='uk-navbar-right uk-visible@s'>\n    <ul className='uk-navbar-nav'>\n      <li className='uk-navbar-item'>\n        <Link to='/'>Dashboard</Link>\n      </li>\n      <li className='uk-navbar-item'>\n        <Link to='/friends'>Friends</Link>\n      </li>\n      <li className='uk-navbar-item'>\n        <Link to={`/users/${activeUser}`}>Profile</Link>\n      </li>\n      <li className='uk-navbar-item'>\n        <a onClick={onLogout}>Logout</a>\n      </li>\n    </ul>\n  </div>\n);\n\nexport default withRouter(withCookies(Header));\n","export const SERVER_ERR = 'Something has gone wrong. We\\'re going to try turning it off and on again.';\nexport const NOT_FOUND = 'Nothing to see here.';\n\n","import React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { withCookies } from 'react-cookie';\nimport { withRouter, Route, Switch } from 'react-router-dom';\nimport axios from 'axios';\n\nimport TripDashboard from './pages/TripDashboard.react';\nimport TripDetail from './pages/TripDetail.react';\nimport FriendsList from './pages/FriendsList.react';\nimport UserProfile from './pages/UserProfile.react';\n\nimport PrivateRoute from './components/PrivateRoute.react';\nimport Login from './components/Login.react';\nimport Header from './components/Header.react';\nimport Spinner from './components/Spinner.react';\n\nimport { setUsers, logout } from './actions';\nimport { NOT_FOUND } from './errorMessages';\n\nimport { apiUrl } from './config';\n\nimport './App.css';\nimport 'uikit/dist/css/uikit.css'\n\nclass App extends Component {\n  onLogout() {\n    this.props.cookies.remove('sessionid');\n    this.props.logout();\n    axios.post(`${apiUrl}/u/logout/`, { withCredentials: true });\n    this.props.history.push('/login');\n  }\n\n  onLogin(data) {\n    this.props.history.push('/');\n    this.props.setUsers({\n      data: {\n        ...data,\n        is_you: true\n      }\n    });\n  }\n\n  componentDidMount() {\n    const { activeUser, location } = this.props;\n\n    if (!activeUser && location.pathname !== '/login') {\n      axios.get(`${apiUrl}/u/`, { withCredentials: true })\n        .then(({ data }) => this.props.setUsers({ data: data.data }))\n        .catch(err => {\n          this.props.history.push('/login');\n        });\n    }\n  }\n\n  renderAuthorTag() {\n    return <div className=\"author\">\n      <a href=\"https://jtfell.github.io\" target=\"_blank\" rel=\"noopener\">\n        by jtfell\n      </a>\n    </div>;\n  }\n\n  render() {\n    if (this.props.error.message) {\n      return <ErrorPage msg={this.props.error.message} />;\n    }\n\n    // Show spinner while loading the current user\n    if (!this.props.activeUser && this.props.location.pathname !== '/login') {\n      return <Fragment>\n        <Spinner />\n        {this.renderAuthorTag()}\n      </Fragment>;\n    }\n\n    return (\n        <Fragment>\n          <Header onLogout={this.onLogout.bind(this)} activeUser={this.props.activeUser} />\n          <main className='uk-container uk-container-small uk-container-center uk-padding'>\n            <Switch>\n              <Route path=\"/login\" component={() => <Login onLogin={this.onLogin.bind(this)} />} />\n\n              <PrivateRoute exact path=\"/\" component={TripDashboard} />\n              <PrivateRoute path=\"/trips/:id\" component={TripDetail} />\n              <PrivateRoute exact path=\"/friends\" component={FriendsList} />\n              <PrivateRoute path=\"/users/:id\" component={UserProfile} />\n              <Route component={() => <ErrorPage msg={NOT_FOUND} hideLogo />} />\n            </Switch>\n          </main>\n\n          {this.renderAuthorTag()}\n        </Fragment>\n    );\n  }\n}\n\nconst ErrorPage = ({ msg, hideLogo }) => (\n  <main className='uk-container uk-container-small uk-container-center uk-padding'>\n    {!hideLogo && \n      <a href='/'>\n        <img src='/logo.png' alt='logo' style={{ height: 85, padding: 15 }} />\n      </a>\n    }\n    <hr />\n    <h4>{msg}</h4>\n  </main>\n);\n\nconst mapStateToProps = ({ users, activeUser, error }) => ({\n  users,\n  activeUser,\n  error\n});\n\nexport default withRouter(withCookies(\n  connect(mapStateToProps, {\n    setUsers,\n    logout\n  })(App)\n));\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  API_START,\n  API_END,\n  API_ERROR,\n\n  LOGOUT,\n\n  SET_USERS,\n  FETCH_USER,\n\n  SET_TRIPS,\n  FETCH_TRIPS,\n  REMOVE_TRIP,\n\n  FETCH_FRIENDS,\n\n  SET_CITIES,\n  FETCH_CITIES,\n} from '../actions/types';\n\nimport {\n  reduceError\n} from './util';\n\nimport { normalize, schema } from 'normalizr';\n\nconst user = new schema.Entity('users');\nconst city = new schema.Entity('cities');\nconst match = new schema.Entity('matches', {\n  user\n}, {\n  idAttribute: v => `${v.user.id}::${v.start_date}::${v.end_date}`\n});\n\nconst trip = new schema.Entity('trips', {\n  user,\n  city,\n  matches: [match]\n}, {\n  processStrategy: (value, parent, key) => {\n    const matches = value.matches || [];\n    return { ...value, matches };\n  }\n});\n\nconst schemas = {\n  users: user,\n  cities: city,\n  trips: trip\n};\n\nconst initialState = {\n  activeUser: null,\n\n  error: {\n    status: null,\n    message: null,\n  },\n\n  trips: {\n    ids: [],\n    all: {},\n    isFetching: false,\n    hasFetched: false,\n  },\n  cities: {\n    ids: [],\n    all: {},\n    isFetching: false,\n    hasFetched: false,\n  },\n  users: {\n    ids: [],\n    all: {},\n    isFetching: false,\n    hasFetched: false,\n  }\n};\n\nconst ENTITIES = [\n  'trips',\n  'cities',\n  'users'\n];\n\nconst insertEntities = (state, data, entity) => {\n  // Make sure we have an array\n  if (!Array.isArray(data)) {\n    data = [data];\n  }\n\n  // Normalise the data\n  const normData = normalize(data, [schemas[entity]]);\n\n  const newState = { ...state };\n  Object.keys(state).forEach(e => {\n    if (!state[e] || ENTITIES.indexOf(e) === -1) {\n      return;\n    }\n\n    newState[e] = {\n      ...state[e],\n    };\n\n    // Merge in all the new objects for each entity\n    const allIds = [...new Set(Object.keys(state[e].all).concat(Object.keys(normData.entities[e] || {})))];\n    allIds.forEach(id => {\n      newState[e].all[id] = Object.assign({}, state[e].all[id], (normData.entities[e] || {})[id])\n    });\n  });\n\n  // Add all the new IDs to the primary entity\n  const existingIds = state[entity].ids;\n  newState[entity].ids = [...new Set(existingIds.concat(normData.result))];\n\n  return newState;\n};\n\nconst TRIPS_LABELS = [\n  FETCH_TRIPS\n];\nconst CITIES_LABELS = [\n  FETCH_CITIES\n];\nconst USERS_LABELS = [\n  FETCH_USER,\n  FETCH_FRIENDS\n];\n\nexport default function(state = initialState, action) {\n\n  switch (action.type) {\n    case LOGOUT:\n      return initialState;\n    case API_ERROR:\n      return reduceError(state, action);\n\n    case REMOVE_TRIP: {\n      const trips = Object.assign({}, state.trips);\n      trips.ids = trips.ids.filter(tId => tId !== action.payload.id);\n      delete trips.all[action.payload.id];\n\n      return {\n        ...state,\n        trips\n      };\n    }\n\n    case SET_TRIPS:\n      return insertEntities(state, action.payload.data, 'trips')\n\n    case SET_CITIES:\n      return insertEntities(state, action.payload.data, 'cities')\n\n    case SET_USERS: {\n      const newState = insertEntities(state, action.payload.data, 'users');\n\n      // Save the user ID of the logged in user\n      if (action.payload && action.payload.data && action.payload.data.is_you) {\n        newState.activeUser = action.payload.data.id;\n      }\n\n      return newState;\n    }\n\n    case API_START:\n      if (TRIPS_LABELS.indexOf(action.payload) > -1) {\n        return {\n          ...state,\n          trips: {\n            ...state.trips,\n            isFetching: true\n          }\n        };\n      }\n      if (USERS_LABELS.indexOf(action.payload) > -1) {\n        return {\n          ...state,\n          users: {\n            ...state.users,\n            isFetching: true\n          }\n        };\n      }\n      if (CITIES_LABELS.indexOf(action.payload) > -1) {\n        return {\n          ...state,\n          cities: {\n            ...state.cities,\n            isFetching: true\n          }\n        };\n      }\n      return state;\n\n    case API_END:\n      if (TRIPS_LABELS.indexOf(action.payload) > -1) {\n        return {\n          ...state,\n          trips: {\n            ...state.trips,\n            isFetching: false,\n            hasFetched: true\n          }\n        };\n      }\n      if (USERS_LABELS.indexOf(action.payload) > -1) {\n        return {\n          ...state,\n          users: {\n            ...state.users,\n            isFetching: false,\n            hasFetched: true\n          }\n        };\n      }\n      if (CITIES_LABELS.indexOf(action.payload) > -1) {\n        return {\n          ...state,\n          cities: {\n            ...state.cities,\n            isFetching: false,\n            hasFetched: true\n          }\n        };\n      }\n      return state;\n\n    default:\n      return state;\n  }\n}\n","import axios from 'axios';\nimport { API } from '../actions/types';\nimport { accessDenied, apiError, apiStart, apiEnd } from '../actions/api';\n\nconst apiMiddleware = ({ dispatch }) => next => action => {\n  if (!action) {\n    return;\n  }\n  next(action);\n\n  if (action.type !== API) return;\n\n  const {\n    url,\n    method,\n    data,\n    accessToken,\n    onSuccess,\n    onFailure,\n    label,\n    headers,\n    nextAction\n  } = action.payload;\n  const dataOrParams = [\"GET\", \"DELETE\"].includes(method) ? \"params\" : \"data\";\n\n  // axios default configs\n  axios.defaults.baseURL = process.env.REACT_APP_BASE_URL || \"\";\n  axios.defaults.headers.common[\"Content-Type\"] = \"application/json\";\n  axios.defaults.headers.common[\"Authorization\"] = `Bearer ${accessToken}`;\n\n  if (label) {\n    dispatch(apiStart(label));\n  }\n\n  axios\n    .request({\n      url,\n      method,\n      headers,\n      withCredentials: true,\n      [dataOrParams]: data\n    })\n    .then(({ data }) => {\n      dispatch(onSuccess(data));\n      dispatch(nextAction(data));\n    })\n    .catch(error => {\n      dispatch(apiError(error));\n      dispatch(onFailure(error));\n\n      // TODO: Handle 404s\n\n      if (error.response && error.response.status === 401) {\n        dispatch(accessDenied(window.location.pathname));\n        // window.location = '/login';\n      }\n    })\n    .finally(() => {\n      if (label) {\n        dispatch(apiEnd(label));\n      }\n    });\n};\n\nexport default apiMiddleware;\n","import { API_START, API_END, ACCESS_DENIED, API_ERROR } from '../actions/types';\n\nexport const apiStart = label => ({\n  type: API_START,\n  payload: label\n});\n\nexport const apiEnd = label => ({\n  type: API_END,\n  payload: label\n});\n\nexport const accessDenied = url => ({\n  type: ACCESS_DENIED,\n  payload: {\n    url\n  }\n});\n\nexport const apiError = error => ({\n  type: API_ERROR,\n  error\n});\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport rootReducer from '../reducers';\nimport thunkMiddleware from 'redux-thunk'\nimport apiMiddleware from '../middleware/api';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancers(\n    applyMiddleware(\n      apiMiddleware,\n      thunkMiddleware,\n    )\n  )\n);\nwindow.store = store;\n\nexport default store;\n","import { SERVER_ERR, NOT_FOUND } from '../errorMessages';\n\nexport function reduceError(state, action) {\n  const err = action.error && action.error.response;\n  if (!err || (err.status >= 500) || !err.status) {\n    return {\n      ...state,\n      error: {\n        status: 500,\n        message: SERVER_ERR,\n      }\n    };\n  }\n\n  if (err.status === 404) {\n    return {\n      ...state,\n      error: {\n        status: 404,\n        message: NOT_FOUND,\n      }\n    };\n  }\n\n  return {\n    ...state,\n    error: {\n      status: err.status,\n      message: (err.data && err.data.error) || SERVER_ERR,\n    }\n  };\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport './index.css';\nimport 'icono/dist/icono.min.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router >\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}