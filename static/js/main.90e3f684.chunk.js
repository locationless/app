(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{181:function(e,t,a){e.exports=a(355)},189:function(e,t,a){},230:function(e,t,a){},331:function(e,t,a){},355:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),i=a(11),s=a(361),u=(a(189),a(191),a(3)),o=a(75),m=a(76),d=a(88),p=a(77),f=a(89),E=a(48),h=a(367),g=a(359),v=a(360),b=a(363),k=a(20),y=a.n(k),O=a(61),N=a(7),_=a(78),j="FETCH_TRIPS",F="FETCH_TRIP",S="SET_TRIPS",w="CREATE_TRIP",T="UPDATE_TRIP",x="DELETE_TRIP",D="REMOVE_TRIP",C="FETCH_CITIES",A="SET_CITIES",R="FETCH_FRIENDS",U="CREATE_FRIEND_REQ",M="ACCEPT_FRIEND_REQ",Y="FETCH_USER",I="SET_USERS",P="LOGOUT",L="API",q="FETCH_EXPLORE_SUGGESTIONS",G="SET_EXPLORE_SUGGESTIONS",B=a(12),H=a.n(B),J="https://api.locationless.club";function W(e){return{type:G,payload:e}}function z(e){return ee({url:"".concat(J,"/u/").concat(e.id,"/friends/"),method:"PUT",onSuccess:function(){return X({data:Object(u.a)({},e,{is_friend:!0,is_pending_friend:!1})})},nextAction:K,onFailure:function(){return console.log("Error occured accepting friendship request")},data:e,label:M})}function V(e){return ee({url:"".concat(J,"/u/").concat(e.id,"/friends/"),method:"POST",onSuccess:function(){return X({data:Object(u.a)({},e,{have_requested_friend:!0})})},onFailure:function(){return console.log("Error occured requesting friendship")},data:e,label:U})}function X(e){return{type:I,payload:e}}function Q(){return ee({url:"".concat(J,"/cities/"),onSuccess:$,onFailure:function(){return console.log("Error occured loading cities")},label:C})}function $(e){return{type:A,payload:e}}function K(e){var t=e&&e.end_date_after?"end_date_after=".concat(H()(e.end_date_after,"YYYY-MM-DD")):"";return ee({url:"".concat(J,"/u/").concat(e.id,"/trips/?").concat(t),onSuccess:Z,onFailure:function(){return console.log("Error occured loading trips")},label:j})}function Z(e){return{type:S,payload:e}}function ee(e){var t=e.url,a=void 0===t?"":t,n=e.method,r=void 0===n?"GET":n,c=e.data,l=void 0===c?null:c,i=e.accessToken,s=void 0===i?null:i,u=e.onSuccess,o=void 0===u?function(){}:u,m=e.onFailure,d=void 0===m?function(){}:m,p=e.nextAction,f=void 0===p?function(){}:p,E=e.label,h=void 0===E?"":E,g=e.headersOverride;return{type:L,payload:{url:a,method:r,data:l,accessToken:s,onSuccess:o,onFailure:d,label:h,headersOverride:void 0===g?null:g,nextAction:f}}}var te=a(357),ae=a(27),ne=function(e){var t=e.id,a=e.first_name,n=e.last_name,c=e.username,l=e.photo_url,i=e.photoOnly,s=l||"/blank-profile-picture.png",u=c||"".concat(a," ").concat(n);return i?r.a.createElement("div",{className:"uk-border-circle friend-chip"},r.a.createElement("img",{className:"uk-border-circle avatar-preview",alt:"avatar",src:s})):r.a.createElement(te.a,{className:"uk-border-circle friend-chip",to:"/users/".concat(t)},r.a.createElement("img",{className:"uk-border-circle avatar-preview",alt:"avatar",src:s}),r.a.createElement("div",{className:"uk-badge tooltip"},u))},re=a(29),ce=a.n(re),le=a(169),ie=a.n(le),se=function(e){var t=e.matches,a=e.start_date,c=e.end_date;return 0===t.length?r.a.createElement("p",null,"None of your friends trips are currently overlapping with this one. Maybe you need to add some people you know to improve your chances?"):r.a.createElement(n.Fragment,null,r.a.createElement("dt",null,"Friends with overlapping dates"),r.a.createElement("dd",null,r.a.createElement("span",{className:"uk-padding"},t.map(function(e){return r.a.createElement(ue,Object.assign({key:e.id},e,{from:a,to:c}))}))))},ue=function(e){var t=e.id,a=e.first_name,n=e.last_name,c=e.username,l=e.photo_url,i=e.start_date,s=e.end_date,u=e.from,o=e.to;return r.a.createElement("div",{className:"overlap-graph"},r.a.createElement("div",{className:"uk-flex uk-flex-middle"},r.a.createElement(ne,{id:t,username:c,first_name:a,last_name:n,photo_url:l,photoOnly:!0}),r.a.createElement(te.a,{to:"/users/".concat(t),className:"chip-label uk-link-muted"},"@",c)),r.a.createElement(oe,{start_date:i,end_date:s,to:o,from:u}))},oe=function(e){e.id;var t=e.start_date,a=e.end_date,n=e.from,r=e.to,c=ce()(r,n),l=ce()(t,n),i=ie()(n,r,t,a);"".concat(Math.floor(80*i/c),"%"),"".concat(Math.max(Math.floor(80*l/c)-5,0),"%");return null},me=function(e){var t=e.city,a=e.start_date,n=e.end_date,c=e.matches;e.isActive;return r.a.createElement("dl",{className:"uk-description-list"},r.a.createElement("dt",null,"Location"),r.a.createElement("dd",{className:"uk-padding-small"},r.a.createElement("span",{className:"uk-padding-small"},t.name),r.a.createElement(ae.a,{code:t.country_code,svg:!0})),r.a.createElement("dt",null,"Duration"),r.a.createElement("dd",{className:"uk-padding-small"},r.a.createElement("span",{className:"uk-padding"},"You will be in ",t.name," for ",ce()(n,a)," ","Days"),r.a.createElement(oe,{start_date:a,end_date:n,to:n,from:a})),r.a.createElement(se,{matches:c,start_date:a,end_date:n}))},de=(a(230),function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null)))}),pe=function(e){var t=e.isFetching,a=e.trip;return t||!a?r.a.createElement(de,null):r.a.createElement(me,a)},fe=Object(i.b)(function(e){return{activeUser:e.activeUser,trips:e.trips,users:e.users,cities:e.cities.all}},{fetchTrip:function(e){return ee({url:"".concat(J,"/trips/").concat(e),onSuccess:Z,onFailure:function(){return console.log("Error occured loading trips")},label:F})}})(function(e){var t=e.activeUser,a=e.match,c=e.trips,l=e.cities,i=e.users,s=e.fetchTrip,o=parseInt(a.params.id,10),m=c.all[o];return m&&(m=Object(u.a)({},m,{city:l[m.city],matches:m.matches.map(function(e){var t=e.split("::"),a=Object(N.a)(t,3),n=a[0],r=a[1],c=a[2];return Object(u.a)({},i.all[n],{start_date:r,end_date:c})})})).user!==t?r.a.createElement(v.a,{to:"/404"}):(Object(n.useEffect)(function(){c.isFetching||m||s(o)},[]),r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"TRIP SUMMARY"),r.a.createElement(pe,{isFetching:c.isFetching,trip:m})))}),Ee=function(e){var t=e.user,a=e.onRequest,n=e.onAccept;return t&&t.is_you?r.a.createElement("button",{className:"uk-button uk-flex",disabled:!0},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-smile"})),r.a.createElement("div",null,"You")):t&&t.is_friend?r.a.createElement("button",{className:"uk-button uk-flex",disabled:!0},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check"})),r.a.createElement("div",null,"Friends")):t&&t.is_pending_friend?r.a.createElement("button",{onClick:n,className:"uk-button uk-flex"},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check"})),r.a.createElement("div",null,"Accept")):t&&t.have_requested_friend?r.a.createElement("button",{className:"uk-button uk-flex",disabled:!0},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-clock"})),r.a.createElement("div",null,"Waiting")):r.a.createElement("button",{className:"uk-button uk-flex",onClick:a},r.a.createElement("div",{className:"icon-sm"},r.a.createElement("span",{className:"icono-plus"})),r.a.createElement("div",null,"Request"))};var he=Object(i.b)(function(e){return{users:e.users}},{})(function(e){var t=e.users,a=e.onRequestFriend,c=e.onAcceptFriend,l=(e.fetchFriends,Object(n.useState)([])),i=Object(N.a)(l,2),s=i[0],u=i[1],o=Object(n.useState)(""),m=Object(N.a)(o,2),d=m[0],p=m[1];return Object(n.useEffect)(function(){var e=y.a.CancelToken.source();return d?y.a.get("".concat(J,"/u/search/?q=").concat(d),{cancelToken:e.token,withCredentials:!0}).then(function(e){var t=e.data;return u(t.data)}).catch(function(e){e&&"unmount"===e.message||console.log(e)}):u([]),function(){return e.cancel("unmount")}},[d]),r.a.createElement("div",{className:"uk-padding-small"},r.a.createElement("input",{className:"uk-input",placeholder:"Search for Telegram Username / Full Name",value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("dl",{className:"uk-description-list"},s.map(function(e){var l=t.all[e.id];return l&&l.is_you?null:r.a.createElement(n.Fragment,{key:e.id},r.a.createElement("dt",null,e.username),r.a.createElement("dd",{className:"uk-padding-small uk-flex uk-flex-between"},r.a.createElement("span",{className:"uk-flex"},r.a.createElement(ne,Object.assign({},e,{photoOnly:!l||!l.is_friend})),r.a.createElement("p",null,e.first_name," ",e.last_name)),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{style:{height:30},className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement(Ee,{user:l,onAccept:function(){return c(e)},onRequest:function(){return a(e)}}))))})))}),ge=function(e){var t=e.isFetching,a=e.users,c=e.activeUser,l=e.acceptFriendRequest,i=e.requestFriendship;if(t)return r.a.createElement(de,null);var s=Object.keys(a.all).filter(function(e){return parseInt(e,10)!==c}).map(function(e){return a.all[e]}),u=s.filter(function(e){return e.is_friend}),o=u.length>0,m=s.filter(function(e){return e.is_pending_friend}),d=m.length>0;return r.a.createElement(n.Fragment,null,o&&r.a.createElement("h4",null,"FRIENDS"),u.map(function(e){return r.a.createElement(ne,Object.assign({key:e.id},e))}),d&&r.a.createElement("h4",null,"PENDING REQUESTS"),m.map(function(e){return r.a.createElement(n.Fragment,{key:e.id},r.a.createElement(ne,Object.assign({},e,{onAccept:function(){return l(e)}})),r.a.createElement(Ee,{user:e,onAccept:function(){return l(e)}}))}),r.a.createElement("h4",null,"FIND FRIENDS"),r.a.createElement(he,{users:a,onRequestFriend:i,onAcceptFriend:l}))},ve=Object(i.b)(function(e){return{users:e.users,activeUser:e.activeUser}},{fetchFriends:function(){return ee({url:"".concat(J,"/u/friends/"),onSuccess:X,onFailure:function(){return console.log("Error occured loading friends")},label:R})},requestFriendship:V,acceptFriendRequest:z})(function(e){var t=e.users,a=e.fetchFriends,c=e.requestFriendship,l=e.acceptFriendRequest,i=e.activeUser;return Object(n.useEffect)(function(){t.isFetching||a()},[]),r.a.createElement(n.Fragment,null,r.a.createElement(ge,{isFetching:t.isFetching&&0===t.ids.length,users:t,activeUser:i,acceptFriendRequest:l,requestFriendship:c}))}),be=a(80),ke=a.n(be),ye=a(81),Oe=a.n(ye),Ne=a(170),_e=a.n(Ne),je=a(38),Fe=a.n(je),Se=a(60),we=a.n(Se),Te=a(59),xe=a.n(Te),De=a(6),Ce=a.n(De),Ae=a(171),Re=a.n(Ae),Ue=a(28),Me=a.n(Ue),Ye=a(82),Ie=a.n(Ye);function Pe(e){return e.map(function(e){return{from:Me()(e.start_date,1),to:Ie()(e.end_date,1)}})}function Le(e,t){var a=e.reduce(function(e,a){return ke()(Me()(e,t-1),a.start_date)?e:new Date(a.end_date)},Date.now());return[a,Me()(a,t)]}function qe(e){if(0===e.length)return 0;var t=Oe()(e[e.length-1].end_date,e[0].start_date);return Math.abs(t)}var Ge=a(115),Be=a.n(Ge),He=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],Je={margin:"auto",width:"fit-content"},We=function(e){var t=e.start_date,a=e.end_date,c=e.hideDaysCount,l=e.className;return r.a.createElement("div",{"data-toggle":!0,className:"uk-flex date-range ".concat(l||""),style:Je},r.a.createElement("div",null,r.a.createElement("b",null,Be()(t)," ",r.a.createElement("br",null)," ",He[Fe()(t)])),r.a.createElement("div",null,r.a.createElement("b",null,a&&r.a.createElement(n.Fragment,null,Be()(a),r.a.createElement("br",null),He[Fe()(a)]))),!c&&r.a.createElement("h6",{style:{width:92,height:42,textAlign:"center",color:"#666",margin:2,marginTop:10}},a?ce()(a,t):"?"," Day Trip"))},ze=a(364),Ve=a(365),Xe=a(362),Qe=a(358),$e=a(366),Ke=a(10),Ze=Object(Ke.divIcon)({html:'<span class="icono-caretDown"/>',iconSize:[25,25],iconAnchor:[17,24],popupAnchor:[-3,-26]}),et=function(e){var t=e.city;return[t.latitude,t.longitude]},tt=function(e){return[[Math.min.apply(null,e.map(function(e){return e[0]}))-2,Math.min.apply(null,e.map(function(e){return e[1]}))-2],[Math.max.apply(null,e.map(function(e){return e[0]}))+2,Math.max.apply(null,e.map(function(e){return e[1]}))+2]]},at=function(e){var t=e.onSelect,a=e.locations;if(t=t||function(){return{}},0===a.length)return r.a.createElement(ze.a,{zoom:1.5,center:[30,40],style:{height:300}},r.a.createElement(Ve.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>'}));var n=a.map(et);return r.a.createElement(ze.a,{bounds:tt(n),style:{height:300}},r.a.createElement(Ve.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a>'}),r.a.createElement(Xe.a,{positions:a.map(et),color:"#bf4e4e"}),a.map(function(e){var a=e.id,n=e.city;return e.start_date,e.end_date,r.a.createElement(Qe.a,{key:a,position:[n.latitude,n.longitude],icon:Ze},r.a.createElement($e.a,{onOpen:function(){return t(a)},onClose:function(){return t(null)},className:"uk-hidden"}))}))},nt=a(90),rt=a(173),ct=a.n(rt);a(235);var lt=function(e){var t=e.disabledDates,a=e.onChange,n=e.value,c=e.hideDaysCount,l=e.disabled,i=e.className,s=e.rangeClassName;return l?r.a.createElement(We,{className:s,start_date:n[0],end_date:n[1],hideDaysCount:c}):r.a.createElement(ct.a,{className:i,options:{mode:"range",disable:t||[],dateFormat:"Y-m-d",wrap:!0},value:n,onChange:a},r.a.createElement(We,{className:s,start_date:n[0],end_date:n[1],hideDaysCount:c}),r.a.createElement("input",{style:{opacity:0},type:"text",placeholder:"I'm invisible and only here to anchor calendar to","data-input":!0}))};var it=function(e){var t=e.allFriends,a=e.numDisplayed;return t.length>a?r.a.createElement("div",{className:"uk-border-circle avatar-preview uk-background-muted"},r.a.createElement("p",{className:"uk-border-circle uk-dark"},"+",t.length-a)):null},st=function(e){var t=e.city,a=e.onDelete,c=e.onCancel;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("div",null,r.a.createElement("h6",null,r.a.createElement(ae.a,{code:t.country_code,svg:!0})," | ",t.name)),r.a.createElement("p",null,"Confirm you would like to delete this trip"),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"},r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check",onClick:a})),r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-cross",onClick:c}))))),r.a.createElement("hr",null))},ut=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("div",null,r.a.createElement("h6",null,"No Trip Selected")),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"}))),r.a.createElement("hr",null))},ot=Object(i.b)(function(){return{}},{updateTrip:function(e){return ee({url:"".concat(J,"/trips/").concat(e.id),method:"PUT",onSuccess:Z,onFailure:function(){return console.log("Error occured updating trip")},data:e,label:T})},deleteTrip:function(e){return ee({url:"".concat(J,"/trips/").concat(e.id),method:"DELETE",onFailure:function(){return console.log("Error occured deleting trip")},onSuccess:function(){return function(e){return{type:D,payload:e}}(e)},label:x})}})(Object(b.a)(function(e){var t=e.updateTrip,a=e.deleteTrip,c=e.disabledDates,l=e.viewOnly,i=(e.isHighlighted,Object(nt.a)(e,["updateTrip","deleteTrip","disabledDates","viewOnly","isHighlighted"])),s=i.id,u=i.city,o=i.start_date,m=i.end_date,d=i.matches,p=Object(n.useState)(!1),f=Object(N.a)(p,2),E=f[0],h=f[1],g=Object(n.useState)([new Date(o),new Date(m)]),v=Object(N.a)(g,2),b=v[0],k=v[1];if(!s)return r.a.createElement(ut,null);if(E)return r.a.createElement(st,{city:u,onCancel:function(){return h(!1)},onDelete:function(){return a({id:s})}});var y=(c||[]).filter(function(e){var t=e.from,a=e.to;return!(H()(Me()(o,1),"YYYY-MM-DD")===H()(t,"YYYY-MM-DD")&&H()(Ie()(m,1),"YYYY-MM-DD")===H()(a,"YYYY-MM-DD"))}),O=l?"div":te.a;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("div",null,r.a.createElement(O,{to:"/trips/".concat(s)},r.a.createElement("h6",null,r.a.createElement(ae.a,{code:u.country_code,svg:!0})," | ",u.name)),r.a.createElement(lt,{disabledDates:y,value:b,onChange:function(e){if(k(e),2===e.length)return t({id:s,city:u.id,start_date:H()(e[0],"YYYY-MM-DD"),end_date:H()(e[1],"YYYY-MM-DD")})},disabled:l})),r.a.createElement("div",{className:"uk-flex"},r.a.createElement("span",{className:"uk-flex"},d.slice(0,3).map(function(e){return r.a.createElement(ne,Object.assign({key:e.id},e))}),r.a.createElement(it,{allFriends:d,numDisplayed:3})),!l&&r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"},r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-trash",onClick:function(e){e.preventDefault(),h(!0)}})))))),r.a.createElement("hr",null))})),mt=a(175),dt=a.n(mt),pt=a(180),ft=function(e){var t=e.children;return r.a.createElement(dt.a,{style:{width:"100%",flexGrow:!0},width:e.width,height:300,rowHeight:35,rowCount:t.length||0,rowRenderer:function(e){var a=e.key,n=e.index,c=(e.isScrolling,e.isVisible,e.style);return r.a.createElement("div",{key:a,style:c},t[n])}})},Et=function(e){return e.map(function(e){return{label:r.a.createElement("div",null,r.a.createElement(ae.a,{code:e.country_code,svg:!0})," ",e.name),value:"".concat(e.name,":::").concat(e.id)}})};var ht=Object(i.b)(function(e){return{cities:e.cities}},{createTrip:function(e){return ee({url:"".concat(J,"/trips/"),method:"POST",onSuccess:Z,onFailure:function(){return console.log("Error occured creating trip")},data:e,label:w})},fetchCities:Q})(function(e){var t=e.cities,a=e.trips,c=e.createTrip,l=e.fetchCities,i=Object(n.useState)(Le(a,4)),s=Object(N.a)(i,2),o=s[0],m=s[1],d=Object(n.useState)(null),p=Object(N.a)(d,2),f=p[0],E=p[1];Object(n.useEffect)(function(){m(Le(a,4))},[a.map(function(e){return e.id}).join("-")]),Object(n.useEffect)(function(){t.isFetching||t.hasFetched||l()},[]);var h=Object.keys(t.all).map(function(e){return t.all[e]});return h.sort(function(e,t){return t.population-e.population}),r.a.createElement("form",{className:"uk-tile new-trip-form uk-padding-small uk-flex"},r.a.createElement("div",null,r.a.createElement(pt.a,{styles:{container:function(){return{width:250}},menu:function(e){return Object(u.a)({},e,{top:null})}},components:{MenuList:function(e){return r.a.createElement(ft,Object.assign({},e,{width:window.innerWidth}))}},placeholder:"New Trip Location",className:"country-picker",isSearchAble:!0,isLoading:t.isFetching,value:f,onChange:E,options:Et(h)})),r.a.createElement(lt,{className:"uk-width-1-3@m",rangeClassName:"uk-text-center",disabledDates:Pe(a),value:o,onChange:m,hideDaysCount:!0}),r.a.createElement("button",{className:"uk-button uk-button-secondary",onClick:function(e){e.preventDefault(),c({city:parseInt(f.value.split(":::")[1],10),start_date:H()(o[0],"YYYY-MM-DD"),end_date:H()(o[1],"YYYY-MM-DD")}),E(null)},disabled:null===f||2!==o.length},r.a.createElement("span",{className:"icono-plus"})))}),gt=["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(e){return e.toUpperCase()}),vt=function(e,t){var a=yt(e)[0];return Math.abs(Oe()(a,t[0].start_date))},bt=function(e,t){var a=_e()(t[0].start_date,e);return[Fe()(a),we()(a)]},kt=function(e){return function(t){var a=t.start_date,n=t.end_date,r=yt(e),c=Object(N.a)(r,2),l=c[0],i=c[1];return xe()(a,l,i)||xe()(n,l,i)}},yt=function(e){var t=Object(N.a)(e,2),a=t[0],n=t[1];return[Ce()("".concat(n,"-").concat(a+1,"-01")),Re()(Ce()("".concat(n,"-").concat(a+1,"-01")))]},Ot=function(e){var t=e.user,a=e.activeUser,c=e.locations,l=e.isFetching,i=Object(n.useState)(null),s=Object(N.a)(i,2),u=(s[0],s[1]),o=Object(n.useState)([Fe()(new Date),we()(new Date)]),m=Object(N.a)(o,2),d=m[0],p=m[1];if(Object(n.useEffect)(function(){c.length>0?p([Fe()(c[0].start_date),we()(c[0].start_date)]):p([Fe()(new Date),we()(new Date)])},[qe(c)]),!c||l)return r.a.createElement(de,null);if(0===c.length)return r.a.createElement("div",null,"No trips yet...",r.a.createElement("br",null),t.id===a&&r.a.createElement(n.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h4",null,"ADD NEW TRIP"),r.a.createElement(ht,{trips:c})));var f=c.length>1?c.filter(kt(d)):c,E=c.length>1?"TRIPS IN ".concat(gt[d[0]]):"TRIPS",h=Pe(c);return r.a.createElement(n.Fragment,null,r.a.createElement(at,{locations:f,onSelect:u}),qe(c)>0&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-flex uk-margin"},r.a.createElement("input",{style:{width:200,margin:"auto"},className:"uk-range uk-flex-around",type:"range",onChange:function(e){return p(bt(e.target.value,c))},max:qe(c),value:vt(d,c)})),r.a.createElement("label",{style:{margin:"auto"}},r.a.createElement(We,{className:"uk-flex-around",hideDaysCount:!0,start_date:yt(d)[0],end_date:yt(d)[1]}))),t.id===a&&r.a.createElement(n.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h4",null,"ADD NEW TRIP"),r.a.createElement(ht,{trips:c})),r.a.createElement("hr",null),r.a.createElement("h4",null,E),f.map(function(e){return r.a.createElement(ot,Object.assign({key:e.id,disabledDates:h},e,{viewOnly:t.id!==a}))}))},Nt=function(e){var t=e.username;return t?r.a.createElement("a",{className:"uk-button telegram-link",href:"https://t.me/".concat(t),target:"_blank",rel:"no-opener"},r.a.createElement("img",{src:"/telegram.svg",alt:"telegram-icon"}),r.a.createElement("span",null,"Send Message")):null},_t=Object(i.b)(function(e){var t=e.cities,a=e.trips;return{users:e.users,trips:a,cities:t,activeUser:e.activeUser}},{fetchUser:function(e){return ee({url:"".concat(J,"/u/").concat(e,"/"),onSuccess:X,onFailure:function(){return console.log("Error occured loading user",e)},label:Y})},fetchTrips:K,requestFriendship:V,acceptFriendRequest:z})(function(e){var t=e.match,a=e.users,c=e.fetchUser,l=e.fetchTrips,i=e.trips,s=e.cities,o=e.activeUser,m=e.requestFriendship,d=e.acceptFriendRequest,p=parseInt(t.params.id,10),f=a.all[p];if(Object(n.useEffect)(function(){a.isFetching||p===o||c(p),l({id:p})},[p]),a.isFetching||!f)return r.a.createElement(de,null);var E=i.ids.map(function(e){var t=i.all[e];return Object(u.a)({},t,{city:s.all[t.city],matches:t.matches.map(function(e){var t=e.split("::"),n=Object(N.a)(t,3),r=n[0],c=n[1],l=n[2];return Object(u.a)({},a.all[r],{start_date:c,end_date:l})})})}).filter(function(e){return e.user===p});E.sort(function(e,t){return ke()(e.start_date,t.start_date)?-1:1});return r.a.createElement("div",null,r.a.createElement("div",{className:"centered-hero"},r.a.createElement("div",{className:"uk-flex uk-flex-left profile-details"},r.a.createElement("div",{className:"uk-flex uk-flex-left"},r.a.createElement("img",{className:"avatar-big uk-border-circle",alt:"avatar",src:f.photo_url||"/blank-profile-picture.png"}),r.a.createElement("div",{className:"uk-flex uk-flex-column uk-padding"},f.username&&r.a.createElement("h4",null,"@",f.username),r.a.createElement("span",null,f.first_name.toUpperCase()," ",(f.last_name||"").toUpperCase()))),r.a.createElement("div",{className:"user-icons"},r.a.createElement(Ee,{user:f,onRequest:function(){return m(f)},onAccept:function(){return d(f)}})),r.a.createElement("div",{className:"user-icons"},r.a.createElement(Nt,{username:f.username}))),r.a.createElement("hr",null)),r.a.createElement(Ot,{user:f,locations:E,activeUser:o,isFetching:i.isFetching}))}),jt=[{label:"Europe",value:"EU"},{label:"N America",value:"NA"},{label:"S America",value:"SA"},{label:"Africa",value:"AF"},{label:"Asia",value:"AS"},{label:"Oceania",value:"OC"}],Ft=function(e){var t=e.suggestions;return 0===t.length?r.a.createElement("div",null,"No results... Try adjusting your filters or adding more"," ",r.a.createElement(te.a,{to:"/friends"},"friends")):r.a.createElement("div",null,t.map(function(e){var t=e.city,a=e.users;return r.a.createElement("div",{key:t.id,className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted"},r.a.createElement("h6",null,r.a.createElement(ae.a,{code:t.country_code,svg:!0})," | ",t.name),a.map(function(e){return r.a.createElement(ne,Object.assign({key:e.id},e))}))}))},St=Object(i.b)(function(e){return{cities:e.cities,suggestions:e.suggestions,users:e.users,activeUser:e.activeUser}},{fetchCities:Q,fetchExploreSuggestions:function(e){return ee({url:"".concat(J,"/explore/?").concat(Object(_.stringify)(e)),onSuccess:W,onFailure:function(){return console.log("Error occured loading explore suggestions")},label:q})}})(function(e){var t=e.cities,a=e.suggestions,c=e.users,l=e.fetchCities,i=(e.activeUser,e.fetchExploreSuggestions),s=Object(n.useState)(null),u=Object(N.a)(s,2),o=u[0],m=u[1],d=Object(n.useState)([new Date,Me()(new Date,60)]),p=Object(N.a)(d,2),f=p[0],E=p[1];Object(n.useEffect)(function(){t.isFetching||0!==t.ids.length||l()},[]);if(Object(n.useEffect)(function(){i({continent:o||void 0,start_date:f[0]&&H()(f[0],"YYYY-MM-DD"),end_date:f[1]&&H()(f[1],"YYYY-MM-DD")})},[o,f[0],f[1]]),a.isFetching)return r.a.createElement(de,null);var h=a.ids.map(function(e){var n=a.all[e],r=n.users.map(function(e){return c.all[e]});return{city:t.all[n.city],users:r}});return r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"FILTERS"),r.a.createElement("div",{className:"uk-flex uk-flex-around"},r.a.createElement(lt,{value:f,onChange:E,hideDaysCount:!0}),r.a.createElement("div",{className:"uk-flex-auto uk-flex uk-flex-wrap"},jt.map(function(e){return r.a.createElement("button",{style:{width:100,height:40,fontSize:12,padding:0,margin:2,lineHeight:"12px",fontWeight:"bold"},className:"uk-button uk-button-default ".concat(o===e.value&&"uk-button-secondary"),onClick:function(){return function(e){m(e===o?null:e)}(e.value)}},e.label)}))),r.a.createElement("h4",null,"SUGGESTIONS"),r.a.createElement(Ft,{suggestions:h}))}),wt=Object(E.a)(function(e){var t=e.component,a=Object(nt.a)(e,["component"]);return r.a.createElement(g.a,Object.assign({},a,{render:function(e){return a.cookies.get("sessionid")?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:"/login"}})}}))}),Tt=a(178),xt=a.n(Tt),Dt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={errMsg:null},a.handleResponse=function(e){return y()({url:"".concat(J,"/u/auth/?").concat(Object(_.stringify)(e)),method:"get",withCredentials:!0}).then(function(t){a.props.onLogin(e)}).catch(function(e){if(e.response){var t=e.response.data&&e.response.data.errors&&e.response.data.errors[0]||e.response;a.setState({errMsg:t})}else a.setState({errMsg:"Unable to connect to the API"})})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"uk-flex uk-flex-center"},r.a.createElement("div",{className:"uk-panel uk-panel-box uk-text-center telegram-login-container"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:55,paddingRight:15,paddingLeft:15}}),r.a.createElement("h1",null,"LOCATIONLESS"),r.a.createElement("hr",null),r.a.createElement(xt.a,{dataOnauth:this.handleResponse,botName:"LocationlessBot"}),r.a.createElement("hr",null),r.a.createElement("p",null,"You will need an account on"," ",r.a.createElement("a",{target:"_blank",href:"https://telegram.org",rel:"no-opener"},"Telegram")," ","to get started")))}}]),t}(n.Component),Ct=Object(b.a)(Dt),At=function(e){var t=e.activeUser,a=e.onLogout,c=e.history,l=Object(n.useState)(!1),i=Object(N.a)(l,2),s=i[0],u=i[1],o=function(e){u(!1),c.push(e)};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-navbar-item uk-hidden@s",onClick:function(){return u(!s)}},r.a.createElement("div",{className:"icono-hamburger",onClick:function(){return u(!s)}})),s&&r.a.createElement("div",{className:"fullscreen-mobile-menu"},r.a.createElement("ul",{className:"uk-list"},r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return u(!s)}},r.a.createElement("div",{className:"icono-cross"})),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return o("/explore")}},r.a.createElement("h4",null,"EXPLORE")),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return o("/friends")}},r.a.createElement("h4",null,"FRIENDS")),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return o("/users/".concat(t))}},r.a.createElement("h4",null,"PROFILE")),r.a.createElement("li",{className:"uk-navbar-item",onClick:function(){return u(!1),void a()}},r.a.createElement("h4",null,"LOGOUT")))))},Rt=function(e){var t=e.activeUser,a=e.onLogout;return r.a.createElement("div",{className:"uk-navbar-right uk-visible@s"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(te.a,{to:"/explore"},"Explore")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(te.a,{to:"/friends"},"Friends")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(te.a,{to:"/users/".concat(t)},"Profile")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement("a",{onClick:a},"Logout"))))},Ut=Object(b.a)(Object(E.a)(function(e){var t=e.cookies,a=e.onLogout,n=e.activeUser,c=e.history;return n&&t.get("sessionid")?r.a.createElement("div",{className:"uk-navbar-container"},r.a.createElement("nav",{className:"uk-navbar uk-container"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement(At,{activeUser:n,onLogout:a,history:c}),r.a.createElement(te.a,{className:"uk-navbar-item uk-logo",to:"/"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:35,paddingRight:15,paddingLeft:15}}),"Locationless")),r.a.createElement(Rt,{activeUser:n,onLogout:a}))):null})),Mt="Something has gone wrong. We're going to try turning it off and on again.",Yt="Nothing to see here.";a(331),a(333);O.init({dsn:"https://6eb020f217d44ca183577d4e925cfe2d@sentry.io/1341418"});var It=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={errorMsg:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"onLogout",value:function(){this.props.cookies.remove("sessionid"),this.props.logout(),y.a.post("".concat(J,"/u/logout/"),{withCredentials:!0}),this.props.history.push("/login")}},{key:"onLogin",value:function(e){this.props.history.push("/"),this.props.setUsers({data:Object(u.a)({},e,{is_you:!0})})}},{key:"componentDidCatch",value:function(e,t){O.withScope(function(a){Object.keys(t).forEach(function(e){return a.setExtra(e,t[e])}),O.captureException(e)})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.activeUser,n=t.location,r=t.history;window.gtag&&r.listen(function(e){window.gtag("set",{user:a}),window.gtag("event","page_view",{pathname:e.pathname})}),a||"/login"===n.pathname||y.a.get("".concat(J,"/u/"),{withCredentials:!0}).then(function(t){var a=t.data;return e.props.setUsers({data:a.data})}).catch(function(t){e.props.history.push("/login")})}},{key:"renderAuthorTag",value:function(){return r.a.createElement("div",{className:"author"},r.a.createElement("a",{href:"https://jtfell.github.io",target:"_blank",rel:"noopener"},"by jtfell"))}},{key:"render",value:function(){var e=this;return this.props.error.message||this.state.errorMsg?r.a.createElement(Pt,{msg:this.props.error.message||this.state.errorMsg}):this.props.activeUser||"/login"===this.props.location.pathname?r.a.createElement(n.Fragment,null,r.a.createElement(Ut,{onLogout:this.onLogout.bind(this),activeUser:this.props.activeUser}),r.a.createElement("main",{className:"uk-container uk-container-small uk-container-center uk-padding"},r.a.createElement(h.a,null,r.a.createElement(g.a,{path:"/login",component:function(){return r.a.createElement(Ct,{onLogin:e.onLogin.bind(e)})}}),r.a.createElement(wt,{exact:!0,path:"/",component:function(){return r.a.createElement(v.a,{to:"/users/".concat(e.props.activeUser)})}}),r.a.createElement(wt,{path:"/trips/:id",component:fe}),r.a.createElement(wt,{exact:!0,path:"/friends",component:ve}),r.a.createElement(wt,{exact:!0,path:"/explore",component:St}),r.a.createElement(wt,{path:"/users/:id",component:_t}),r.a.createElement(g.a,{component:function(){return r.a.createElement(Pt,{msg:Yt,hideLogo:!0})}}))),this.renderAuthorTag()):r.a.createElement(n.Fragment,null,r.a.createElement(de,null),this.renderAuthorTag())}}],[{key:"getDerivedStateFromError",value:function(e){return{errorMsg:Mt}}}]),t}(n.Component),Pt=function(e){var t=e.msg,a=e.hideLogo;return r.a.createElement("main",{className:"uk-container uk-container-small uk-container-center uk-padding"},!a&&r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:85,padding:15}})),r.a.createElement("hr",null),r.a.createElement("h4",null,t),r.a.createElement("a",{onClick:function(){return O.showReportDialog()}},"Report feedback"))},Lt=Object(b.a)(Object(E.a)(Object(i.b)(function(e){return{users:e.users,activeUser:e.activeUser,error:e.error}},{setUsers:X,logout:function(){return{type:P}}})(It)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qt=a(50),Gt=a(116);var Bt=a(43),Ht=new Bt.b.Entity("users"),Jt=new Bt.b.Entity("cities"),Wt=new Bt.b.Entity("matches",{user:Ht},{idAttribute:function(e){return"".concat(e.user.id,"::").concat(e.start_date,"::").concat(e.end_date)}}),zt={users:Ht,cities:Jt,trips:new Bt.b.Entity("trips",{user:Ht,city:Jt,matches:[Wt]},{processStrategy:function(e,t,a){var n=e.matches||[];return Object(u.a)({},e,{matches:n})}}),suggestions:new Bt.b.Entity("suggestions",{city:Jt,users:[Ht]},{idAttribute:function(e){return e.city.id}})},Vt={activeUser:null,error:{status:null,message:null},trips:{ids:[],all:{},isFetching:!1,hasFetched:!1},cities:{ids:[],all:{},isFetching:!1,hasFetched:!1},users:{ids:[],all:{},isFetching:!1,hasFetched:!1},suggestions:{ids:[],all:{},isFetching:!1,hasFetched:!1}},Xt=["trips","cities","users","suggestions"],Qt=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)||(t=[t]);var r=Object(Bt.a)(t,[zt[a]]),c=Object(u.a)({},e);if(Object.keys(e).forEach(function(t){e[t]&&-1!==Xt.indexOf(t)&&(c[t]=Object(u.a)({},e[t]),Object(Gt.a)(new Set(Object.keys(e[t].all).concat(Object.keys(r.entities[t]||{})))).forEach(function(a){c[t].all[a]=Object.assign({},e[t].all[a],(r.entities[t]||{})[a])}))}),n)c[a].ids=r.result;else{var l=e[a].ids;c[a].ids=Object(Gt.a)(new Set(l.concat(r.result)))}return c},$t=[j],Kt=[C],Zt=[Y,R],ea=a(179),ta=a(74),aa=function(e){return{type:"API_END",payload:e}},na=function(e){var t=e.dispatch;return function(e){return function(a){if(a&&(e(a),a.type===L)){var n=a.payload,r=n.url,c=n.method,l=n.data,i=n.accessToken,s=n.onSuccess,u=n.onFailure,o=n.label,m=n.headers,d=n.nextAction,p=["GET","DELETE"].includes(c)?"params":"data";y.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_TELEGRAM_BOT:"LocationlessBot",REACT_APP_API_URL:"https://api.locationless.club",REACT_APP_GA_ENABLED:"true",REACT_APP_SENTRY_DSN:"https://6eb020f217d44ca183577d4e925cfe2d@sentry.io/1341418"}).REACT_APP_BASE_URL||"",y.a.defaults.headers.common["Content-Type"]="application/json",y.a.defaults.headers.common.Authorization="Bearer ".concat(i),o&&t(function(e){return{type:"API_START",payload:e}}(o)),y.a.request(Object(ta.a)({url:r,method:c,headers:m,withCredentials:!0},p,l)).then(function(e){var a=e.data;t(s(a)),t(d(a)),o&&t(aa(o))}).catch(function(e){t(function(e){return{type:"API_ERROR",error:e}}(e)),t(u(e)),e.response&&401===e.response.status&&t({type:"ACCESS_DENIED",payload:{url:window.location.pathname}}),o&&t(aa(o))})}}}},ra=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qt.c,ca=Object(qt.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Vt;case"API_ERROR":return function(e,t){var a=t.error&&t.error.response;return!a||a.status>=500||!a.status?Object(u.a)({},e,{error:{status:500,message:Mt}}):404===a.status?Object(u.a)({},e,{error:{status:404,message:Yt}}):Object(u.a)({},e,{error:{status:a.status,message:a.data&&a.data.error||Mt}})}(e,t);case D:var a=Object.assign({},e.trips);return a.ids=a.ids.filter(function(e){return e!==t.payload.id}),delete a.all[t.payload.id],Object(u.a)({},e,{trips:a});case G:return Qt(e,t.payload.data,"suggestions",!0);case S:return Qt(e,t.payload.data,"trips");case A:return Qt(e,t.payload.data,"cities");case I:var n=Qt(e,t.payload.data,"users");return t.payload&&t.payload.data&&t.payload.data.is_you&&(n.activeUser=t.payload.data.id),n;case"API_START":return $t.indexOf(t.payload)>-1?Object(u.a)({},e,{trips:Object(u.a)({},e.trips,{isFetching:!0})}):Zt.indexOf(t.payload)>-1?Object(u.a)({},e,{users:Object(u.a)({},e.users,{isFetching:!0})}):Kt.indexOf(t.payload)>-1?Object(u.a)({},e,{cities:Object(u.a)({},e.cities,{isFetching:!0})}):e;case"API_END":return $t.indexOf(t.payload)>-1?Object(u.a)({},e,{trips:Object(u.a)({},e.trips,{isFetching:!1,hasFetched:!0})}):Zt.indexOf(t.payload)>-1?Object(u.a)({},e,{users:Object(u.a)({},e.users,{isFetching:!1,hasFetched:!0})}):Kt.indexOf(t.payload)>-1?Object(u.a)({},e,{cities:Object(u.a)({},e.cities,{isFetching:!1,hasFetched:!0})}):e;default:return e}},ra(Object(qt.a)(na,ea.a)));window.store=ca;var la=ca;l.a.render(r.a.createElement(i.a,{store:la},r.a.createElement(s.a,null,r.a.createElement(Lt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[181,2,1]]]);
//# sourceMappingURL=main.90e3f684.chunk.js.map