(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,a){e.exports=a(355)},222:function(e,t,a){},325:function(e,t,a){},351:function(e,t,a){},355:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),i=a(28),s=(a(222),a(224),a(7)),o=a(107),u=a(108),m=a(128),d=a(109),p=a(129),E=a(75),f=a(363),h=a(359),g=a(25),v=a.n(g),b=a(23),k="FETCH_TRIPS",O="FETCH_TRIP",y="SET_TRIPS",N="CREATE_TRIP",_="UPDATE_TRIP",j="DELETE_TRIP",F="REMOVE_TRIP",w="FETCH_CITIES",T="SET_CITIES",S="FETCH_FRIENDS",R="CREATE_FRIEND_REQ",x="ACCEPT_FRIEND_REQ",A="FETCH_USER",C="SET_USERS",D="API",U="http://api.locationless.club";function I(){return H({url:"".concat(U,"/u/friends/"),onSuccess:q,onFailure:function(){return console.log("Error occured loading friends")},label:S})}function P(e){return H({url:"".concat(U,"/u/").concat(e.id,"/friends/"),method:"PUT",onSuccess:function(){return q({data:Object(s.a)({},e,{is_friend:!0,is_pending_friend:!1})})},nextAction:Y,onFailure:function(){return console.log("Error occured accepting friendship request")},data:e,label:x})}function L(e){return H({url:"".concat(U,"/u/").concat(e.id,"/friends/"),method:"POST",onSuccess:function(){return q({data:Object(s.a)({},e,{have_requested_friend:!0})})},onFailure:function(){return console.log("Error occured requesting friendship")},data:e,label:R})}function q(e){return{type:C,payload:e}}function M(e){return{type:T,payload:e}}function Y(){return H({url:"".concat(U,"/trips/"),onSuccess:B,onFailure:function(){return console.log("Error occured loading trips")},label:k})}function B(e){return{type:y,payload:e}}function H(e){var t=e.url,a=void 0===t?"":t,n=e.method,r=void 0===n?"GET":n,c=e.data,l=void 0===c?null:c,i=e.accessToken,s=void 0===i?null:i,o=e.onSuccess,u=void 0===o?function(){}:o,m=e.onFailure,d=void 0===m?function(){}:m,p=e.nextAction,E=void 0===p?function(){}:p,f=e.label,h=void 0===f?"":f,g=e.headersOverride;return{type:D,payload:{url:a,method:r,data:l,accessToken:s,onSuccess:u,onFailure:d,label:h,headersOverride:void 0===g?null:g,nextAction:E}}}var G=a(53),z=a.n(G),J=a(210),V=a(54),W=a(43),Q=a.n(W),X=a(199),$=a.n(X),K=a(212),Z=a(112),ee=a.n(Z),te=(a(315),function(e){return e.map(function(e){return{label:r.a.createElement("div",null,r.a.createElement(V.a,{code:e.country_code,svg:!0})," ",e.name),value:"".concat(e.name,":::").concat(e.id)}})}),ae=function(e){var t=e.children;return r.a.createElement(J.a,{style:{width:"100%",flexGrow:!0},width:e.width,height:300,rowHeight:35,rowCount:t.length||0,rowRenderer:function(e){var a=e.key,n=e.index,c=(e.isScrolling,e.isVisible,e.style);return r.a.createElement("div",{key:a,style:c},t[n])}})};var ne=function(e){var t=e.cities,a=e.onCreateTrip,c=Object(n.useState)(null),l=Object(b.a)(c,2),i=l[0],s=l[1],o=Object(n.useState)([Date.now(),$()(Date.now(),7)]),u=Object(b.a)(o,2),m=u[0],d=u[1],p=Object.keys(t.all).map(function(e){return t.all[e]});return p.sort(function(e,t){return t.population-e.population}),r.a.createElement("form",{className:"uk-tile uk-padding-small uk-flex uk-flex-around uk-flex-middle"},r.a.createElement(K.a,{styles:{container:function(){return{width:250}}},components:{MenuList:function(e){return r.a.createElement(ae,Object.assign({},e,{width:window.innerWidth}))}},placeholder:"New Trip Location",className:"-select",isSearchAble:!0,isLoading:t.isFetching,value:i,onChange:s,options:te(p)}),r.a.createElement(ee.a,{className:"uk-input uk-width-1-3",options:{mode:"range"},value:m,onChange:d}),r.a.createElement("button",{className:"uk-button uk-button-secondary",onClick:function(e){e.preventDefault(),a({city:parseInt(i.value.split(":::")[1],10),start_date:Q()(m[0],"YYYY-MM-DD"),end_date:Q()(m[1],"YYYY-MM-DD")}),s(null)},disabled:null===i},r.a.createElement("span",{className:"icono-plus"})))},re=a(357),ce=a(365),le=a(155),ie=a.n(le),se=a(156),oe=a.n(se),ue=function(e){var t=e.id,a=e.first_name,n=e.last_name,c=e.username,l=e.photo_url,i=e.photoOnly,s=l||"/blank-profile-picture.png",o=c||"".concat(a," ").concat(n);return i?r.a.createElement("div",{className:"uk-border-circle friend-chip"},r.a.createElement("img",{className:"uk-border-circle avatar-preview",alt:"avatar",src:s})):r.a.createElement(re.a,{className:"uk-border-circle friend-chip",to:"/users/".concat(t)},r.a.createElement("img",{className:"uk-border-circle avatar-preview",alt:"avatar",src:s}),r.a.createElement("div",{className:"uk-badge tooltip"},o))},me=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],de=function(e){var t=e.start_date,a=e.end_date;return r.a.createElement("div",{className:"uk-flex date-range"},r.a.createElement("div",null,r.a.createElement("b",null,oe()(t)," ",r.a.createElement("br",null)," ",me[ie()(t)])),r.a.createElement("div",null,r.a.createElement("b",null,oe()(a)," ",r.a.createElement("br",null)," ",me[ie()(a)])),r.a.createElement("p",{style:{width:92,height:42,fontSize:16,textAlign:"center",margin:2,marginTop:10}},z()(a,t)," Day Trip"))};var pe=function(e){var t=e.allFriends,a=e.numDisplayed;return t.length>a?r.a.createElement("div",{className:"uk-border-circle avatar-preview uk-background-muted"},r.a.createElement("p",{className:"uk-border-circle uk-dark"},"+",t.length-a)):null},Ee=Object(ce.a)(function(e){var t=e.id,a=e.city,c=e.start_date,l=e.end_date,i=e.matches,s=(e.history,e.onUpdate),o=e.onDelete,u=Object(n.useState)(!1),m=Object(b.a)(u,2),d=m[0],p=m[1],E=Object(n.useState)(!1),f=Object(b.a)(E,2),h=f[0],g=f[1],v=Object(n.useState)([new Date(c),new Date(l)]),k=Object(b.a)(v,2),O=k[0],y=k[1];return h?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-background-muted"},r.a.createElement("div",null,r.a.createElement("h6",null,r.a.createElement(V.a,{code:a.country_code,svg:!0})," | ",a.name)),r.a.createElement("p",null,"Definitely delete this trip?"),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"},r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check",onClick:function(){return o({id:t})}})),r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-cross",onClick:function(e){return g(!1)}}))))),r.a.createElement("hr",null)):d?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-background-muted"},r.a.createElement("div",null,r.a.createElement("h6",null,r.a.createElement(V.a,{code:a.country_code,svg:!0})," | ",a.name)),r.a.createElement(ee.a,{className:"uk-input uk-width-1-3",options:{mode:"range"},value:O,onChange:y}),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"},r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-check",onClick:function(){return p(!1),s({id:t,city:a.id,start_date:Q()(O[0],"YYYY-MM-DD"),end_date:Q()(O[1],"YYYY-MM-DD")})}})),r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-cross",onClick:function(e){return p(!d)}}))))),r.a.createElement("hr",null)):r.a.createElement(n.Fragment,null,r.a.createElement(re.a,{className:"uk-tile uk-padding-small uk-flex uk-flex-between uk-link-muted",to:"/trips/".concat(t)},r.a.createElement("div",null,r.a.createElement("h6",null,r.a.createElement(V.a,{code:a.country_code,svg:!0})," | ",a.name),r.a.createElement(de,{start_date:c,end_date:l})),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("span",{className:"uk-flex"},i.slice(0,3).map(function(e){return r.a.createElement(ue,Object.assign({key:e.id},e))}),r.a.createElement(pe,{allFriends:i,numDisplayed:3})),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement("span",{className:"uk-flex uk-flex-column"},r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-gear",onClick:function(e){e.preventDefault(),p(!d)}})),r.a.createElement("span",{className:"icon-sm"},r.a.createElement("span",{className:"icono-trash",onClick:function(e){e.preventDefault(),g(!0)}})))))),r.a.createElement("hr",null))}),fe=(a(325),function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null)))});function he(e){var t=e.trips,a=e.updateTrip,c=e.deleteTrip;return t.isFetching?r.a.createElement(fe,null):0===t.length?r.a.createElement("p",null,"You have no upcoming trips. Hope you enjoy your rest."):r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"UPCOMING TRIPS"),t.map(function(e){return r.a.createElement(Ee,Object.assign({key:e.id,onUpdate:a,onDelete:c},e))}))}var ge=Object(i.b)(function(e){return{cities:e.cities,trips:e.trips,users:e.users}},{fetchTrips:Y,fetchCities:function(){return H({url:"".concat(U,"/cities/"),onSuccess:M,onFailure:function(){return console.log("Error occured loading cities")},label:w})},fetchFriends:I,createTrip:function(e){return H({url:"".concat(U,"/trips/"),method:"POST",onSuccess:B,onFailure:function(){return console.log("Error occured creating trip")},data:e,label:N})},updateTrip:function(e){return H({url:"".concat(U,"/trips/").concat(e.id),method:"PUT",onSuccess:B,onFailure:function(){return console.log("Error occured updating trip")},data:e,label:_})},deleteTrip:function(e){return H({url:"".concat(U,"/trips/").concat(e.id),method:"DELETE",onFailure:function(){return console.log("Error occured deleting trip")},onSuccess:function(){return function(e){return{type:F,payload:e}}(e)},label:j})}})(function(e){var t=e.cities,a=e.trips,c=e.users;Object(n.useEffect)(function(){t.isFetching||t.hasFetched||e.fetchCities(),a.isFetching||a.hasFetched||e.fetchTrips()},[]);var l=a.ids.map(function(e){var n=a.all[e];return Object(s.a)({},n,{city:t.all[n.city],matches:n.matches.map(function(e){var t=e.split("::"),a=Object(b.a)(t,3),n=a[0],r=a[1],l=a[2];return Object(s.a)({},c.all[n],{start_date:r,end_date:l})})})});return l.sort(function(e,t){return z()(e.start_date,t.start_date)}),r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"ADD NEW TRIP"),r.a.createElement(ne,{cities:t,isLoadingCities:t.isFetching,onCreateTrip:e.createTrip}),r.a.createElement(he,{trips:l,updateTrip:e.updateTrip,deleteTrip:e.deleteTrip}))}),ve=a(204),be=a.n(ve),ke=function(e){var t=e.matches,a=e.start_date,c=e.end_date;return 0===t.length?r.a.createElement("p",null,"None of your friends trips are currently overlapping with this one. Maybe you need to add some people you know to improve your chances?"):r.a.createElement(n.Fragment,null,r.a.createElement("dt",null,"Friends with overlapping dates"),r.a.createElement("dd",null,r.a.createElement("span",{className:"uk-padding"},t.map(function(e){return r.a.createElement(Oe,Object.assign({key:e.id},e,{from:a,to:c}))}))))},Oe=function(e){var t=e.id,a=e.first_name,n=e.last_name,c=e.username,l=e.photo_url,i=e.start_date,s=e.end_date,o=e.from,u=e.to;return r.a.createElement("div",{className:"overlap-graph"},r.a.createElement("div",{className:"uk-flex uk-flex-middle"},r.a.createElement(ue,{id:t,username:c,first_name:a,last_name:n,photo_url:l,photoOnly:!0}),r.a.createElement(re.a,{to:"/users/".concat(t),className:"chip-label uk-link-muted"},"@",c)),r.a.createElement(ye,{start_date:i,end_date:s,to:u,from:o}))},ye=function(e){e.id;var t=e.start_date,a=e.end_date,n=e.from,r=e.to,c=z()(r,n),l=z()(t,n),i=be()(n,r,t,a);"".concat(Math.floor(80*i/c),"%"),"".concat(Math.max(Math.floor(80*l/c)-5,0),"%");return null},Ne=function(e){var t=e.city,a=e.start_date,n=e.end_date,c=e.matches;e.isActive;return r.a.createElement("dl",{className:"uk-description-list"},r.a.createElement("dt",null,"Location"),r.a.createElement("dd",{className:"uk-padding-small"},r.a.createElement("span",{className:"uk-padding-small"},t.name),r.a.createElement(V.a,{code:t.country_code,svg:!0})),r.a.createElement("dt",null,"Duration"),r.a.createElement("dd",{className:"uk-padding-small"},r.a.createElement("span",{className:"uk-padding"},"You will be in ",t.name," for ",z()(n,a)," Days"),r.a.createElement(ye,{start_date:a,end_date:n,to:n,from:a})),r.a.createElement(ke,{matches:c,start_date:a,end_date:n}))},_e=function(e){var t=e.isFetching,a=e.trip;return t||!a?r.a.createElement(fe,null):r.a.createElement(Ne,a)},je=Object(i.b)(function(e){return{trips:e.trips,users:e.users,cities:e.cities.all}},{fetchTrip:function(e){return H({url:"".concat(U,"/trips/").concat(e),onSuccess:B,onFailure:function(){return console.log("Error occured loading trips")},label:O})}})(function(e){var t=e.match,a=e.trips,c=e.cities,l=e.users,i=e.fetchTrip,o=parseInt(t.params.id,10),u=a.all[o];return u&&(u=Object(s.a)({},u,{city:c[u.city],matches:u.matches.map(function(e){var t=e.split("::"),a=Object(b.a)(t,3),n=a[0],r=a[1],c=a[2];return Object(s.a)({},l.all[n],{start_date:r,end_date:c})})})),Object(n.useEffect)(function(){a.isFetching||u||i(o)},[]),r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"TRIP SUMMARY"),r.a.createElement(_e,{isFetching:a.isFetching,trip:u}))}),Fe=function(e){var t=e.user,a=e.onRequest,n=e.onAccept;return t&&t.is_you?r.a.createElement("button",{className:"uk-button icon-sm",disabled:!0},r.a.createElement("span",{className:"icono-smile"}),"You"):t&&t.is_friend?r.a.createElement("button",{className:"uk-button icon-sm",disabled:!0},r.a.createElement("span",{className:"icono-check"}),"Friends"):t&&t.is_pending_friend?r.a.createElement("button",{onClick:n,className:"uk-button icon-sm"},"Accept"):t&&t.have_requested_friend?r.a.createElement("button",{className:"uk-button icon-sm",disabled:!0},r.a.createElement("span",{className:"icono-clock"}),"Waiting"):r.a.createElement("button",{className:"uk-button icon-sm",onClick:a},r.a.createElement("span",{className:"icono-plus"}),"Request")};var we=Object(i.b)(function(e){return{users:e.users}},{})(function(e){var t=e.users,a=e.onRequestFriend,c=e.onAcceptFriend,l=(e.fetchFriends,Object(n.useState)([])),i=Object(b.a)(l,2),s=i[0],o=i[1],u=Object(n.useState)(""),m=Object(b.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)(function(){var e=v.a.CancelToken.source();return d?v.a.get("/u/search/?q=".concat(d),{cancelToken:e.token}).then(function(e){var t=e.data;return o(t.data)}).catch(function(e){e&&"unmount"===e.message||console.log(e)}):o([]),function(){return e.cancel("unmount")}},[d]),r.a.createElement("div",{className:"uk-padding-small"},r.a.createElement("input",{className:"uk-input",placeholder:"Search for Telegram Username / Full Name",value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("dl",{className:"uk-description-list"},s.map(function(e){var l=t.all[e.id];return l&&l.is_you?null:r.a.createElement(n.Fragment,{key:e.id},r.a.createElement("dt",null,e.username),r.a.createElement("dd",{className:"uk-padding-small uk-flex uk-flex-between"},r.a.createElement("span",{className:"uk-flex"},r.a.createElement(ue,Object.assign({},e,{photoOnly:!l||!l.is_friend})),r.a.createElement("p",null,e.first_name," ",e.last_name)),r.a.createElement("span",{className:"uk-flex"},r.a.createElement("hr",{style:{height:30},className:"uk-divider-vertical uk-margin-right uk-margin-left"}),r.a.createElement(Fe,{user:l,onAccept:function(){return c(e)},onRequest:function(){return a(e)}}))))})))}),Te=function(e){var t=e.isFetching,a=e.users,c=e.activeUser,l=e.acceptFriendRequest,i=e.requestFriendship;if(t)return r.a.createElement(fe,null);var s=Object.keys(a.all).filter(function(e){return parseInt(e,10)!==c}).map(function(e){return a.all[e]}),o=s.filter(function(e){return e.is_friend}),u=o.length>0,m=s.filter(function(e){return e.is_pending_friend}),d=m.length>0;return r.a.createElement(n.Fragment,null,u&&r.a.createElement("h4",null,"FRIENDS"),o.map(function(e){return r.a.createElement(ue,Object.assign({key:e.id},e))}),d&&r.a.createElement("h4",null,"PENDING REQUESTS"),m.map(function(e){return r.a.createElement(n.Fragment,{key:e.id},r.a.createElement(ue,Object.assign({},e,{onAccept:function(){return l(e)}})),r.a.createElement(Fe,{user:e,onAccept:function(){return l(e)}}))}),r.a.createElement("h4",null,"FIND FRIENDS"),r.a.createElement(we,{users:a,onRequestFriend:i,onAcceptFriend:l}))},Se=Object(i.b)(function(e){return{users:e.users,activeUser:e.activeUser}},{fetchFriends:I,requestFriendship:L,acceptFriendRequest:P})(function(e){var t=e.users,a=e.fetchFriends,c=e.requestFriendship,l=e.acceptFriendRequest,i=e.activeUser;return Object(n.useEffect)(function(){t.isFetching||a()},[]),r.a.createElement(n.Fragment,null,r.a.createElement(Te,{isFetching:t.isFetching&&0===t.ids.length,users:t,activeUser:i,acceptFriendRequest:l,requestFriendship:c}))}),Re=a(360),xe=a(366),Ae=a(361),Ce=a(358),De=a(364),Ue=a(17),Ie=Object(Ue.divIcon)({html:'<span class="icono-caretDown"/>',iconSize:[25,25],iconAnchor:[17,24],popupAnchor:[-3,-26]}),Pe=function(e){var t=e.userId,a=Object(n.useState)(null),c=Object(b.a)(a,2),l=c[0],i=c[1];Object(n.useEffect)(function(){var e;(e=t)&&(i(null),v()("/u/".concat(e,"/locations/")).then(function(e){200===e.status&&i(e.data.data)}))},[t]);var s=l;return null===l?r.a.createElement(fe,null):r.a.createElement(Re.a,{center:[51.505,-.09],zoom:1,style:{height:300}},r.a.createElement(xe.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(Ae.a,{positions:[].map(function(e){var t=e.city;return[t.latitude,t.longitude]})}),r.a.createElement(Ae.a,{positions:s.map(function(e){var t=e.city;return[t.latitude,t.longitude]}),color:"#bf4e4e"}),l.map(function(e){var t=e.id,a=e.city;return e.start_date,e.end_date,r.a.createElement(Ce.a,{key:t,position:[a.latitude,a.longitude],icon:Ie},r.a.createElement(De.a,null,a.name))}))},Le=function(e){var t=e.isFetching,a=e.user,n=(e.activeUser,e.onRequest),c=e.onAccept;return t||!a?r.a.createElement(fe,null):r.a.createElement("div",{className:"centered-hero"},r.a.createElement("div",{className:"uk-flex uk-flex-left"},r.a.createElement("img",{className:"avatar-big uk-border-circle",alt:"avatar",src:a.photo_url||"/blank-profile-picture.png"}),r.a.createElement("div",{className:"uk-flex uk-flex-column uk-padding"},r.a.createElement("h4",null,"@",a.username),r.a.createElement("span",null,a.first_name.toUpperCase()," ",a.last_name.toUpperCase())),r.a.createElement("div",{className:"user-icons"},r.a.createElement(Fe,{user:a,onRequest:n,onAccept:c}))),r.a.createElement("hr",null),r.a.createElement(Pe,{userId:a.id}))},qe=Object(i.b)(function(e){return{users:e.users,activeUser:e.activeUser}},{fetchUser:function(e){return H({url:"".concat(U,"/u/").concat(e,"/"),onSuccess:q,onFailure:function(){return console.log("Error occured loading user",e)},label:A})},requestFriendship:L,acceptFriendRequest:P})(function(e){var t=e.match,a=e.users,c=e.fetchUser,l=e.activeUser,i=e.requestFriendship,s=e.acceptFriendRequest,o=parseInt(t.params.id,10),u=a.all[o];return Object(n.useEffect)(function(){a.isFetching||u||c(o)},[]),r.a.createElement(Le,{isFetching:a.isFetching,user:u,activeUser:l,onRequest:function(){return i(u)},onAccept:function(){return s(u)}})}),Me=a(213),Ye=a(362),Be=Object(E.a)(function(e){var t=e.component,a=Object(Me.a)(e,["component"]);return r.a.createElement(h.a,Object.assign({},a,{render:function(e){return a.cookies.get("sessionid")?r.a.createElement(t,e):r.a.createElement(Ye.a,{to:{pathname:"/login"}})}}))}),He=a(207),Ge=a(208),ze=a.n(Ge),Je=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={errMsg:null},a.handleResponse=function(e){return v()({url:"".concat(U,"/u/auth/?").concat(Object(He.stringify)(e)),method:"get",withCredentials:!0}).then(function(t){a.props.onLogin(e),a.props.history.push("/")}).catch(function(e){if(e.response){var t=e.response.data&&e.response.data.errors&&e.response.data.errors[0]||e.response;a.setState({errMsg:t})}else a.setState({errMsg:"Unable to connect to the API"})})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"uk-grid-match"},r.a.createElement("div",{className:"uk-panel uk-panel-box uk-text-center telegram-login-container"},r.a.createElement(ze.a,{dataOnauth:this.handleResponse,botName:"LocationlessBot"})))}}]),t}(n.Component),Ve=Object(ce.a)(Je),We=Object(E.a)(function(e){var t=e.cookies,a=e.onLogout,n=e.activeUser;return r.a.createElement("div",{className:"uk-navbar-container"},r.a.createElement("nav",{className:"uk-navbar uk-container"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement(re.a,{className:"uk-navbar-item uk-logo",to:"/"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:35,paddingRight:15}}),"Locationless")),t.get("sessionid")&&n?r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement("ul",{className:"uk-navbar-nav"},r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(re.a,{to:"/"},"Dashboard")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(re.a,{to:"/friends"},"Friends")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement(re.a,{to:"/users/".concat(n)},"Profile")),r.a.createElement("li",{className:"uk-navbar-item"},r.a.createElement("a",{onClick:a},"Logout")))):null))}),Qe=(a(351),a(353),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onLogout",value:function(){this.props.cookies.remove("sessionid"),v.a.post("".concat(U,"/u/logout/")),window.location="/login"}},{key:"onLogin",value:function(e){this.props.setUsers({data:Object(s.a)({},e,{is_you:!0})})}},{key:"componentDidMount",value:function(){var e=this;this.props.activeUser||"/login"===window.location.pathname||v.a.get("/u/").then(function(t){var a=t.data;return e.props.setUsers({data:a.data})}).catch(function(e){window.location="/login"})}},{key:"renderPrivateRoutes",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Be,{exact:!0,path:"/",component:ge}),r.a.createElement(Be,{path:"/trips/:id",component:je}),r.a.createElement(Be,{exact:!0,path:"/friends",component:Se}),r.a.createElement(Be,{path:"/users/:id",component:qe}))}},{key:"renderError",value:function(e){return r.a.createElement("main",{className:"uk-container uk-container-small uk-container-center uk-padding"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/logo.png",alt:"logo",style:{height:85,padding:15}})),r.a.createElement("hr",null),r.a.createElement("p",null,e))}},{key:"render",value:function(){var e=this;return this.props.activeUser||"/login"===window.location.pathname?this.props.error.message?this.renderError(this.props.error.message):r.a.createElement(f.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(We,{onLogout:this.onLogout.bind(this),activeUser:this.props.activeUser}),r.a.createElement("main",{className:"uk-container uk-container-small uk-container-center uk-padding"},r.a.createElement(h.a,{path:"/login",component:function(){return r.a.createElement(Ve,{onLogin:e.onLogin.bind(e)})}}),this.renderPrivateRoutes()))):r.a.createElement(fe,null)}}]),t}(n.Component)),Xe=Object(E.a)(Object(i.b)(function(e){return{users:e.users,activeUser:e.activeUser,error:e.error}},{setUsers:q})(Qe));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=a(79),Ke=a(157),Ze="Looks like we're a little... LOCATIONLESS ourselves. Sorry about that.",et="Nothing to see here.";var tt=a(84),at=new tt.b.Entity("users"),nt=new tt.b.Entity("cities"),rt=new tt.b.Entity("matches",{user:at},{idAttribute:function(e){return"".concat(e.user.id,"::").concat(e.start_date,"::").concat(e.end_date)}}),ct={users:at,cities:nt,trips:new tt.b.Entity("trips",{user:at,city:nt,matches:[rt]},{processStrategy:function(e,t,a){var n=e.matches||[];return Object(s.a)({},e,{matches:n})}})},lt={activeUser:null,error:{status:null,message:null},trips:{ids:[],all:{},isFetching:!1,hasFetched:!1},cities:{ids:[],all:{},isFetching:!1,hasFetched:!1},users:{ids:[],all:{},isFetching:!1,hasFetched:!1}},it=["trips","cities","users"],st=function(e,t,a){Array.isArray(t)||(t=[t]);var n=Object(tt.a)(t,[ct[a]]),r=Object(s.a)({},e);Object.keys(e).forEach(function(t){e[t]&&-1!==it.indexOf(t)&&(r[t]=Object(s.a)({},e[t]),Object(Ke.a)(new Set(Object.keys(e[t].all).concat(Object.keys(n.entities[t]||{})))).forEach(function(a){r[t].all[a]=Object.assign({},e[t].all[a],(n.entities[t]||{})[a])}))});var c=e[a].ids;return r[a].ids=Object(Ke.a)(new Set(c.concat(n.result))),r},ot=[k],ut=[w],mt=[A,S],dt=a(209),pt=a(106),Et=function(e){var t=e.dispatch;return function(e){return function(a){if(a&&(e(a),a.type===D)){var n=a.payload,r=n.url,c=n.method,l=n.data,i=n.accessToken,s=n.onSuccess,o=n.onFailure,u=n.label,m=n.headers,d=n.nextAction,p=["GET","DELETE"].includes(c)?"params":"data";v.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BASE_URL||"",v.a.defaults.headers.common["Content-Type"]="application/json",v.a.defaults.headers.common.Authorization="Bearer ".concat(i),u&&t(function(e){return{type:"API_START",payload:e}}(u)),v.a.request(Object(pt.a)({url:r,method:c,headers:m},p,l)).then(function(e){var a=e.data;t(s(a)),t(d(a))}).catch(function(e){t(function(e){return{type:"API_ERROR",error:e}}(e)),t(o(e)),e.response&&401===e.response.status&&(t({type:"ACCESS_DENIED",payload:{url:window.location.pathname}}),window.location="/login")}).finally(function(){u&&t(function(e){return{type:"API_END",payload:e}}(u))})}}}},ft=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$e.c,ht=Object($e.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_ERROR":return function(e,t){var a=t.error&&t.error.response;return!a||a.status>=500||!a.status?Object(s.a)({},e,{error:{status:500,message:Ze}}):404===a.status?Object(s.a)({},e,{error:{status:404,message:et}}):Object(s.a)({},e,{error:{status:a.status,message:a.data&&a.data.error||Ze}})}(e,t);case F:var a=Object.assign({},e.trips);return a.ids=a.ids.filter(function(e){return e!==t.payload.id}),delete a.all[t.payload.id],Object(s.a)({},e,{trips:a});case y:return st(e,t.payload.data,"trips");case T:return st(e,t.payload.data,"cities");case C:var n=st(e,t.payload.data,"users");return t.payload&&t.payload.data&&t.payload.data.is_you&&(n.activeUser=t.payload.data.id),n;case"API_START":return ot.indexOf(t.payload)>-1?Object(s.a)({},e,{trips:Object(s.a)({},e.trips,{isFetching:!0})}):mt.indexOf(t.payload)>-1?Object(s.a)({},e,{users:Object(s.a)({},e.users,{isFetching:!0})}):ut.indexOf(t.payload)>-1?Object(s.a)({},e,{cities:Object(s.a)({},e.cities,{isFetching:!0})}):e;case"API_END":return ot.indexOf(t.payload)>-1?Object(s.a)({},e,{trips:Object(s.a)({},e.trips,{isFetching:!1,hasFetched:!0})}):mt.indexOf(t.payload)>-1?Object(s.a)({},e,{users:Object(s.a)({},e.users,{isFetching:!1,hasFetched:!0})}):ut.indexOf(t.payload)>-1?Object(s.a)({},e,{cities:Object(s.a)({},e.cities,{isFetching:!1,hasFetched:!0})}):e;default:return e}},ft(Object($e.a)(Et,dt.a)));window.store=ht;var gt=ht;l.a.render(r.a.createElement(i.a,{store:gt},r.a.createElement(Xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[214,2,1]]]);
//# sourceMappingURL=main.945a8ec5.chunk.js.map